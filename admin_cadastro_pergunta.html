
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro de Perguntas - Admin</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC5ZrkEy7KuCFJOtPvI7-P-JcA0MF4im5c",
  authDomain: "painel-yellup.firebaseapp.com",
  projectId: "painel-yellup",
  storageBucket: "painel-yellup.appspot.com",
  messagingSenderId: "608347210297",
  appId: "1:608347210297:web:75092713724e617c7203e8",
  measurementId: "G-SYZ16X31KQ"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

onAuthStateChanged(auth, (user) => {
  if (!user || user.email !== "admin@yellup.com") {
    alert("Acesso restrito. Redirecionando...");
    window.location.href = "login_usuario.html";
  }
});

window.salvarPergunta = async () => {
  const pergunta = document.getElementById("pergunta").value;
  const pontos = parseInt(document.getElementById("pontos").value);
  const timeId = document.getElementById("timeId").value;
  const resposta = document.getElementById("resposta").value;
  const opcoes = {
    A: document.getElementById("A").value,
    B: document.getElementById("B").value,
    C: document.getElementById("C").value,
    D: document.getElementById("D").value,
  };

  if (!pergunta || !resposta || !timeId || !opcoes.A || !opcoes.B || !opcoes.C || !opcoes.D) {
    alert("Preencha todos os campos.");
    return;
  }

  await addDoc(collection(db, "perguntas"), {
    PERGUNTA: pergunta,
    pontos: pontos,
    timeId: timeId,
    resposta: opcoes[resposta],
    opcoes: opcoes,
    timestamp: serverTimestamp()
  });

  alert("Pergunta cadastrada com sucesso!");
  document.getElementById("formulario").reset();
};
</script>
<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
.container { max-width: 700px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
input, select { width: 100%; margin-bottom: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
button { padding: 10px 20px; background: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
button:hover { background: #0056b3; }
</style>
</head>
<body>
<div class="container">
<h1>Cadastrar Nova Pergunta</h1>
<form id="formulario">
<input type="text" id="pergunta" placeholder="Texto da pergunta" required>
<input type="text" id="A" placeholder="Alternativa A" required>
<input type="text" id="B" placeholder="Alternativa B" required>
<input type="text" id="C" placeholder="Alternativa C" required>
<input type="text" id="D" placeholder="Alternativa D" required>
<select id="resposta" required>
  <option value="">Selecione a correta</option>
  <option value="A">A</option>
  <option value="B">B</option>
  <option value="C">C</option>
  <option value="D">D</option>
</select>
<input type="number" id="pontos" placeholder="Pontos" value="100" required>
<input type="text" id="timeId" placeholder="ID do time (ex: gremio, flamengo)" required>
<button type="button" onclick="salvarPergunta()">Salvar</button>
</form>
</div>
</body>
</html>
