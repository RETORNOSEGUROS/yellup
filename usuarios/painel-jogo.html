<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jogo ao Vivo - Yellup</title>
  
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  
  <!-- âœ… CSS UNIFICADO -->
  <link rel="stylesheet" href="css/yellup-design-system.css" />
  <link rel="stylesheet" href="css/tema-time.css" />
  
  <style>
    body {
      background-image: url('/usuarios/img/fundoyu.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }
    
    .barra-tempo {
      height: 8px;
      background-color: #28a745;
      width: 100%;
      display: none;
      animation: barraTempo var(--duracao, 9s) linear forwards;
    }
    
    @keyframes barraTempo {
      from { width: 100%; }
      to { width: 0%; }
    }
  </style>
</head>
<body class="with-background">
  
  <div class="container py-4">
    
    <!-- Voltar -->
    <div class="mb-3">
      <a href="painel.html" class="yl-btn yl-btn-outline">â† Voltar</a>
    </div>

    <!-- Info do usuÃ¡rio -->
    <div class="d-flex justify-content-end mb-2">
      <div id="infoUsuario" class="text-end fw-bold" style="font-size: 1rem; color: var(--yl-text-primary);"></div>
    </div>

    <!-- TÃ­tulo do jogo -->
    <h3 id="tituloJogo" style="color: var(--yl-text-primary);">âš½ Jogo ao Vivo</h3>
    <p class="info-jogo" style="color: var(--yl-text-secondary);">
      <strong>InÃ­cio:</strong> <span id="inicioJogo"></span> |
      <strong>Fim previsto:</strong> <span id="fimJogo"></span> |
      <strong>Tempo restante:</strong> <span id="tempoRestante"></span>
    </p>

    <!-- âœ… NOVO: Player de RÃ¡dio -->
    <div id="radio-player-container" class="mb-4"></div>

    <!-- âœ… NOVO: Patrocinador Topo -->
    <div id="patrocinador-topo" class="mb-4"></div>

    <!-- Bloco dos times -->
    <div class="row mb-3">
      <div class="col-md-6 text-center">
        <span id="timeA" class="nome-time" style="background-color: var(--cor-timeA, #28a745);">Time A</span>
        <p style="color: var(--yl-text-secondary);"><span id="torcidaA">0</span> torcedores - <span id="porcentagemA">0%</span></p>
        <p style="color: var(--yl-text-secondary);">Pontos: <span id="pontosA">0</span> (<span id="porcentagemPontosA">0%</span>)</p>
      </div>
      <div class="col-md-6 text-center">
        <span id="timeB" class="nome-time" style="background-color: var(--cor-timeB, #dc3545);">Time B</span>
        <p style="color: var(--yl-text-secondary);"><span id="torcidaB">0</span> torcedores - <span id="porcentagemB">0%</span></p>
        <p style="color: var(--yl-text-secondary);">Pontos: <span id="pontosB">0</span> (<span id="porcentagemPontosB">0%</span>)</p>
      </div>
    </div>

    <!-- Barras de forÃ§a -->
    <div class="barra-forca mb-2">
      <div id="barraTorcidaA" class="barra-a" style="width: 50%;"></div>
      <div id="barraTorcidaB" class="barra-b" style="width: 50%;"></div>
    </div>
    <div class="barra-forca mb-4">
      <div id="barraPontosA" class="barra-a" style="width: 50%;"></div>
      <div id="barraPontosB" class="barra-b" style="width: 50%;"></div>
    </div>

    <!-- Bloco de perguntas -->
    <div class="mb-4" id="blocoPergunta">
      
      <!-- âœ… NOVO: Contador de jogadas grÃ¡tis -->
      <div id="jogadasGratis" class="mb-3 text-center">
        <div class="yl-chip" style="font-size: 1.1em;">
          ğŸ Jogadas GrÃ¡tis Hoje: <strong id="qtdGratis" style="color: var(--yl-accent);">3</strong>/3
        </div>
        <small style="color: var(--yl-text-secondary); display: block; margin-top: 5px;">Recarrega Ã  meia-noite</small>
      </div>

      <!-- âœ… NOVO: Info sobre perguntas disponÃ­veis -->
      <div id="infoPerguntas" class="mb-3 text-center" style="color: var(--yl-text-secondary);">
        <small>ğŸ“Š Perguntas respondidas: <strong id="perguntasRespondidas">0</strong> | DisponÃ­veis: <strong id="perguntasDisponiveis">0</strong></small>
      </div>

      <button class="yl-btn yl-btn-success mb-3 w-100" onclick="responderPergunta()">ğŸ¯ Responder Pergunta</button>
      
      <div id="barra" class="barra-tempo mb-2"></div>
      <h5 id="textoPergunta" style="color: var(--yl-text-primary);">Aguardando pergunta...</h5>
      <div class="list-group mt-3" id="opcoesRespostas"></div>
      <div id="mensagemResultado" class="mt-3 fw-bold"></div>
      <div id="estatisticasPergunta" class="mt-2 small" style="color: var(--yl-text-muted);"></div>
    </div>

    <!-- Chats -->
    <div class="row mb-4">
      <div class="col-md-6 chat-col mb-3">
        <h6 class="chat-title">ğŸ’¬ Chat da Torcida</h6>
        <div class="chat-box" id="chatTime"></div>
        <input type="text" id="mensagemTime" class="form-control mt-2" placeholder="Mensagem...">
        <button onclick="enviarMensagem('time')" class="yl-btn yl-btn-primary mt-1 w-100">Enviar</button>
      </div>
      <div class="col-md-6 chat-col mb-3">
        <h6 class="chat-title">ğŸŒ Chat Geral</h6>
        <div class="chat-box" id="chatGeral"></div>
        <input type="text" id="mensagemGeral" class="form-control mt-2" placeholder="Mensagem...">
        <button onclick="enviarMensagem('geral')" class="yl-btn yl-btn-outline mt-1 w-100">Enviar</button>
      </div>
    </div>

    <!-- âœ… NOVO: Patrocinador Meio -->
    <div id="patrocinador-banner" class="mb-4"></div>

    <!-- Ranking -->
    <div class="mt-5">
      <h5 style="color: var(--yl-text-primary);">ğŸ† Ranking dos Torcedores</h5>
      <ul id="rankingPontuacao" class="list-group"></ul>
    </div>

    <!-- âœ… NOVO: Patrocinador RodapÃ© -->
    <div id="patrocinador-rodape" class="mt-5 mb-5"></div>

  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="js/firebase-init.js"></script>

  <!-- âœ… NOVOS SERVICES -->
  <script src="js/pergunta-service.js"></script>
  <script src="js/patrocinador-service.js"></script>
  <script src="js/radio-service.js"></script>

  <!-- LÃ³gica Principal -->
  <script src="js/painel-jogo.js"></script>
  
</body>
</html>
