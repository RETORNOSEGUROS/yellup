<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painel - Yellup</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0e141b 0%, #1a2332 100%);
      color: #e7eef7;
      min-height: 100vh;
      padding-bottom: 100px;
    }

    /* ==================== HEADER ==================== */
    .header {
      background: rgba(14, 20, 27, 0.95);
      backdrop-filter: blur(20px);
      padding: 15px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.8em;
      font-weight: 800;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .user-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 1.2em;
      color: #0e141b;
    }

    .user-name {
      font-weight: 600;
    }

    .btn-logout {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: #e7eef7;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
    }

    .btn-logout:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* ==================== CONTAINER ==================== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    /* ==================== PERFIL DO USU√ÅRIO ==================== */
    .user-profile {
      background: linear-gradient(135deg, rgba(30, 41, 54, 0.9) 0%, rgba(24, 34, 46, 0.9) 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 25px;
    }

    .profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      font-weight: 800;
      color: #0e141b;
    }

    .profile-info h2 {
      font-size: 1.5em;
      margin-bottom: 5px;
    }

    .level-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .profile-team {
      color: #a9b5c6;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .user-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
    }

    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 12px;
      text-align: center;
    }

    .stat-value {
      font-size: 1.8em;
      font-weight: 800;
      color: #ffb547;
    }

    .stat-label {
      font-size: 0.85em;
      color: #a9b5c6;
    }

    /* ==================== SE√á√ÉO DE JOGOS ==================== */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 1.4em;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-count {
      font-size: 0.9em;
      color: #a9b5c6;
    }

    /* ==================== SCROLL HORIZONTAL DE JOGOS ==================== */
    .games-scroll {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      overflow-y: hidden;
      padding-bottom: 12px;
      margin-bottom: 30px;
      scroll-snap-type: x proximity;
      -webkit-overflow-scrolling: touch;
    }

    /* Scrollbar estilizada */
    .games-scroll::-webkit-scrollbar {
      height: 6px;
    }

    .games-scroll::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    .games-scroll::-webkit-scrollbar-thumb {
      background: rgba(255, 181, 71, 0.3);
      border-radius: 3px;
    }

    .games-scroll::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 181, 71, 0.5);
    }

    .games-scroll .empty-state {
      min-width: 100%;
    }

    /* ==================== CARD DO JOGO ==================== */
    .game-card {
      background: linear-gradient(135deg, rgba(30, 41, 54, 0.9) 0%, rgba(24, 34, 46, 0.9) 100%);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 20px;
      transition: all 0.3s ease;
      min-width: 310px;
      max-width: 340px;
      flex-shrink: 0;
      scroll-snap-align: start;
    }

    .game-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 181, 71, 0.3);
    }

    /* Indicador "arraste para ver mais" */
    .scroll-hint {
      display: none;
      align-items: center;
      gap: 6px;
      font-size: 0.75em;
      color: #a9b5c6;
      margin-left: auto;
    }

    .scroll-hint .arrow {
      display: inline-block;
      animation: scrollArrow 1.5s ease-in-out infinite;
    }

    @keyframes scrollArrow {
      0%, 100% { transform: translateX(0); opacity: 0.5; }
      50% { transform: translateX(5px); opacity: 1; }
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .game-teams {
      flex: 1;
    }

    .team-name {
      font-weight: 600;
      font-size: 1.1em;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Camiseta mini */
    .jersey-mini {
      width: 24px;
      height: 28px;
      display: inline-block;
      vertical-align: middle;
    }

    .vs {
      color: #a9b5c6;
      font-size: 0.85em;
      margin: 5px 0;
    }

    .game-status {
      padding: 6px 15px;
      border-radius: 50px;
      font-size: 0.75em;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .status-live {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      animation: pulse-live 2s ease-in-out infinite;
      box-shadow: 0 0 20px rgba(231, 76, 60, 0.6);
    }

    @keyframes pulse-live {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    .status-scheduled {
      background: linear-gradient(135deg, #2f6fed 0%, #1a4eb8 100%);
    }

    .status-finished {
      background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
    }

    .game-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    .info-item {
      text-align: center;
    }

    .info-label {
      font-size: 0.75em;
      color: #a9b5c6;
      margin-bottom: 3px;
    }

    .info-value {
      font-weight: 600;
      color: #e7eef7;
    }

    /* TORCIDA */
    .torcida {
      margin-bottom: 15px;
    }

    .torcida-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.85em;
    }

    .torcida-bar {
      height: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 50px;
      overflow: hidden;
      display: flex;
      width: 100%;
    }

    .torcida-fill-a {
      transition: width 0.5s ease;
      flex-shrink: 0;
      height: 100%;
    }

    .torcida-fill-b {
      transition: width 0.5s ease;
      flex-shrink: 0;
      height: 100%;
    }

    /* BADGE DE TIME ESCOLHIDO */
    .team-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 8px 15px;
      background: linear-gradient(135deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.2));
      border: 2px solid #2ecc71;
      border-radius: 50px;
      font-size: 0.85em;
      font-weight: 600;
      color: #2ecc71;
      margin-bottom: 15px;
    }

    /* BOT√ïES DE A√á√ÉO */
    .game-actions {
      display: flex;
      gap: 10px;
    }

    .btn-action {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
      font-size: 0.95em;
    }

    .btn-primary {
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      color: #0e141b;
      box-shadow: 0 4px 15px rgba(255, 181, 71, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 181, 71, 0.5);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #2f6fed 0%, #1a4eb8 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(47, 111, 237, 0.3);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(47, 111, 237, 0.5);
    }

    /* ==================== MODAL DE ESCOLHA ==================== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: linear-gradient(135deg, #1e2936 0%, #18222e 100%);
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      text-align: center;
      margin-bottom: 25px;
    }

    .modal-header h2 {
      font-size: 1.5em;
      margin-bottom: 10px;
    }

    .modal-header p {
      color: #a9b5c6;
    }

    .team-options {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .team-option {
      flex: 1;
      padding: 20px;
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .team-option:hover {
      border-color: #ffb547;
      background: rgba(255, 181, 71, 0.1);
    }

    .team-option .jersey-modal {
      width: 60px;
      height: 70px;
      margin: 0 auto 15px;
    }

    .team-option .team-name-modal {
      font-weight: 600;
      font-size: 1.1em;
    }

    .modal-warning {
      text-align: center;
      padding: 15px;
      background: rgba(231, 76, 60, 0.1);
      border: 1px solid rgba(231, 76, 60, 0.3);
      border-radius: 10px;
      margin-bottom: 20px;
      color: #e74c3c;
      font-size: 0.9em;
    }

    .modal-actions {
      display: flex;
      justify-content: center;
    }

    .btn-cancel {
      padding: 12px 30px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      color: #a9b5c6;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
    }

    .btn-cancel:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* EMPTY STATE */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #a9b5c6;
    }

    .empty-icon {
      font-size: 4em;
      margin-bottom: 20px;
    }

    /* TOAST */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 15px 30px;
      border-radius: 50px;
      font-weight: 600;
      z-index: 2000;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    /* BOTTOM NAV */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(14, 20, 27, 0.98);
      backdrop-filter: blur(20px);
      padding: 10px 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 99;
    }

    .nav-content {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      justify-content: space-around;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      color: #a9b5c6;
      text-decoration: none;
      font-size: 0.75em;
      transition: all 0.3s ease;
      padding: 5px 10px;
    }

    .nav-item:hover, .nav-item.active {
      color: #ffb547;
    }

    .nav-icon {
      font-size: 1.5em;
    }

    /* ==================== QUIZ DI√ÅRIO DO TIME DO CORA√á√ÉO ==================== */
    .quiz-diario-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(8px);
    }

    .quiz-diario-overlay.active {
      display: flex;
    }

    .quiz-diario-card {
      background: linear-gradient(135deg, #1e2936 0%, #18222e 100%);
      border-radius: 24px;
      padding: 0;
      max-width: 480px;
      width: 92%;
      border: 1px solid rgba(255, 181, 71, 0.3);
      animation: quizSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 181, 71, 0.1);
    }

    @keyframes quizSlideIn {
      from {
        opacity: 0;
        transform: translateY(60px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .quiz-diario-banner {
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      padding: 20px 25px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .quiz-diario-banner::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 60%);
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%, 100% { transform: translateX(-30%) translateY(-30%); }
      50% { transform: translateX(30%) translateY(30%); }
    }

    .quiz-diario-banner h2 {
      color: #0e141b;
      font-size: 1.3em;
      font-weight: 800;
      position: relative;
      z-index: 1;
    }

    .quiz-diario-banner p {
      color: rgba(14, 20, 27, 0.7);
      font-size: 0.85em;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .quiz-diario-body {
      padding: 25px;
    }

    /* Step: Convite */
    .quiz-step-convite {
      text-align: center;
    }

    .quiz-step-convite .quiz-team-info {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 15px 0 20px;
      padding: 12px 20px;
      background: rgba(255, 181, 71, 0.1);
      border: 1px solid rgba(255, 181, 71, 0.2);
      border-radius: 12px;
    }

    .quiz-step-convite .quiz-team-info .jersey-quiz {
      width: 40px;
      height: 48px;
    }

    .quiz-step-convite .quiz-team-name {
      font-weight: 700;
      font-size: 1.1em;
      color: #ffb547;
    }

    .quiz-step-convite p {
      color: #a9b5c6;
      font-size: 0.9em;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .quiz-convite-btns {
      display: flex;
      gap: 12px;
    }

    .quiz-convite-btns button {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 0.95em;
      transition: all 0.3s ease;
    }

    .btn-quiz-sim {
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      color: #0e141b;
      box-shadow: 0 4px 15px rgba(255, 181, 71, 0.3);
    }

    .btn-quiz-sim:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 181, 71, 0.5);
    }

    .btn-quiz-nao {
      background: rgba(255, 255, 255, 0.08);
      color: #a9b5c6;
      border: 1px solid rgba(255, 255, 255, 0.15) !important;
    }

    .btn-quiz-nao:hover {
      background: rgba(255, 255, 255, 0.15);
      color: #e7eef7;
    }

    /* Step: Pergunta */
    .quiz-step-pergunta {
      display: none;
    }

    .quiz-pergunta-texto {
      font-size: 1.05em;
      font-weight: 600;
      color: #e7eef7;
      line-height: 1.5;
      margin-bottom: 20px;
      text-align: center;
    }

    .quiz-xp-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 12px;
      background: rgba(255, 181, 71, 0.15);
      border: 1px solid rgba(255, 181, 71, 0.3);
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      color: #ffb547;
      margin-bottom: 15px;
    }

    .quiz-alternativas {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .quiz-alt-btn {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: rgba(0, 0, 0, 0.25);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      font-family: 'Poppins', sans-serif;
      color: #e7eef7;
      font-size: 0.9em;
      width: 100%;
    }

    .quiz-alt-btn:hover:not(.disabled) {
      border-color: rgba(255, 181, 71, 0.5);
      background: rgba(255, 181, 71, 0.08);
      transform: translateX(4px);
    }

    .quiz-alt-btn .alt-letra {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85em;
      flex-shrink: 0;
      transition: all 0.3s ease;
    }

    .quiz-alt-btn.correta {
      border-color: #2ecc71 !important;
      background: rgba(46, 204, 113, 0.15) !important;
      animation: pulseCorrect 0.5s ease;
    }

    .quiz-alt-btn.correta .alt-letra {
      background: #2ecc71;
      color: #fff;
    }

    .quiz-alt-btn.errada {
      border-color: #e74c3c !important;
      background: rgba(231, 76, 60, 0.15) !important;
      animation: shakeWrong 0.5s ease;
    }

    .quiz-alt-btn.errada .alt-letra {
      background: #e74c3c;
      color: #fff;
    }

    .quiz-alt-btn.disabled {
      cursor: default;
      opacity: 0.5;
    }

    .quiz-alt-btn.disabled:not(.correta):not(.errada) {
      opacity: 0.35;
    }

    @keyframes pulseCorrect {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }

    @keyframes shakeWrong {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    /* Step: Resultado */
    .quiz-step-resultado {
      display: none;
      text-align: center;
    }

    .quiz-resultado-icon {
      font-size: 4em;
      margin-bottom: 10px;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes bounceIn {
      from { transform: scale(0); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .quiz-resultado-titulo {
      font-size: 1.4em;
      font-weight: 800;
      margin-bottom: 8px;
    }

    .quiz-resultado-titulo.acertou {
      color: #2ecc71;
    }

    .quiz-resultado-titulo.errou {
      color: #e74c3c;
    }

    .quiz-resultado-msg {
      color: #a9b5c6;
      font-size: 0.9em;
      line-height: 1.5;
      margin-bottom: 15px;
    }

    .quiz-xp-ganho {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 24px;
      background: linear-gradient(135deg, rgba(255, 181, 71, 0.2), rgba(255, 140, 66, 0.1));
      border: 2px solid rgba(255, 181, 71, 0.4);
      border-radius: 50px;
      font-weight: 800;
      font-size: 1.2em;
      color: #ffb547;
      margin-bottom: 20px;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
    }

    .btn-quiz-fechar {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 0.95em;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      color: #0e141b;
      transition: all 0.3s ease;
    }

    .btn-quiz-fechar:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 181, 71, 0.5);
    }

    /* ==================== FIM QUIZ DI√ÅRIO ==================== */

    /* ==================== BANNER INSTAGRAM (INLINE) ==================== */
    .instagram-banner {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px 24px;
      margin: 30px 0 10px;
      background: linear-gradient(135deg, rgba(240, 148, 51, 0.1) 0%, rgba(225, 48, 108, 0.1) 50%, rgba(188, 24, 136, 0.1) 100%);
      border: 1px solid rgba(225, 48, 108, 0.25);
      border-radius: 14px;
      text-decoration: none;
      color: #e7eef7;
      transition: all 0.3s ease;
    }

    .instagram-banner:hover {
      border-color: rgba(225, 48, 108, 0.5);
      background: linear-gradient(135deg, rgba(240, 148, 51, 0.15) 0%, rgba(225, 48, 108, 0.15) 50%, rgba(188, 24, 136, 0.15) 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(225, 48, 108, 0.2);
    }

    .instagram-banner .insta-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .instagram-banner .insta-icon svg {
      width: 18px;
      height: 18px;
      fill: white;
    }

    .instagram-banner .insta-text {
      font-size: 0.9em;
      font-weight: 600;
    }

    .instagram-banner .insta-text span {
      color: #a9b5c6;
      font-weight: 400;
      font-size: 0.85em;
    }

    /* RESPONSIVO */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 15px;
      }

      .game-card {
        min-width: 280px;
        max-width: 300px;
      }

      .team-options {
        flex-direction: column;
      }

      .user-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <div class="logo">‚öΩ Yellup</div>
      <div class="user-menu">
        <a href="notificacoes.html" class="btn-notif" id="btnNotif" style="
          position: relative;
          padding: 8px;
          margin-right: 10px;
          font-size: 1.3em;
          text-decoration: none;
        ">
          üîî
          <span id="notifBadge" style="
            position: absolute;
            top: 0;
            right: 0;
            background: #ef4444;
            color: #fff;
            font-size: 0.5em;
            padding: 2px 5px;
            border-radius: 10px;
            display: none;
          ">0</span>
        </a>
        <div class="user-avatar" id="userAvatar">U</div>
        <span class="user-name" id="userName">Usu√°rio</span>
        <button class="btn-logout" onclick="logout()">Sair</button>
      </div>
    </div>
  </header>

  <!-- CONTAINER PRINCIPAL -->
  <div class="container">
    
    <!-- PERFIL DO USU√ÅRIO -->
    <div class="user-profile">
      <div class="profile-header">
        <div class="profile-avatar" id="profileAvatar">U</div>
        <div class="profile-info">
          <h2 id="profileName">Usu√°rio</h2>
          <div id="profileLevel"></div>
          <div class="profile-team">
            <span id="profileTeamJersey"></span>
            <span id="profileTeam">Carregando...</span>
          </div>
        </div>
      </div>
      <div id="levelProgress" style="margin-bottom: 20px;"></div>
      <div class="user-stats">
        <div class="stat-card">
          <div class="stat-value" id="statCredits">0</div>
          <div class="stat-label">üíé Cr√©ditos</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statXP">0</div>
          <div class="stat-label">‚≠ê XP</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statGames">0</div>
          <div class="stat-label">üéÆ Jogos</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statFree">5</div>
          <div class="stat-label">üéÅ Gr√°tis</div>
        </div>
      </div>
    </div>

    <!-- JOGOS AO VIVO -->
    <section id="sectionLive">
      <div class="section-header">
        <h2 class="section-title">üî¥ Jogos ao Vivo</h2>
        <span class="section-count" id="countLive">0 jogos</span>
        <span class="scroll-hint" id="hintLive"><span class="arrow">‚Üí</span> arraste</span>
      </div>
      <div class="games-scroll" id="gamesLive">
        <div class="empty-state">
          <div class="empty-icon">‚öΩ</div>
          <p>Carregando jogos...</p>
        </div>
      </div>
    </section>

    <!-- PR√ìXIMOS JOGOS -->
    <section id="sectionScheduled">
      <div class="section-header">
        <h2 class="section-title">üìÖ Pr√≥ximos Jogos</h2>
        <span class="section-count" id="countScheduled">0 jogos</span>
        <span class="scroll-hint" id="hintScheduled"><span class="arrow">‚Üí</span> arraste</span>
      </div>
      <div class="games-scroll" id="gamesScheduled">
        <div class="empty-state">
          <div class="empty-icon">üìÖ</div>
          <p>Carregando jogos...</p>
        </div>
      </div>
    </section>

    <!-- MODOS DE JOGO -->
    <section id="sectionModes">
      <div class="section-header">
        <h2 class="section-title">üéÆ Modos & Comunidade</h2>
      </div>
      <div class="modes-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px;">
        <a href="teste-ligas.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(147, 51, 234, 0.2), rgba(79, 70, 229, 0.1));
          border: 2px solid rgba(147, 51, 234, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">üèÜ</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Teste de Ligas</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Treine gr√°tis!</div>
        </a>
        <a href="embates-pvp.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1));
          border: 2px solid rgba(239, 68, 68, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">‚öîÔ∏è</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Embates PvP</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Desafie amigos!</div>
        </a>
        <a href="torneios.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(255, 181, 71, 0.2), rgba(255, 140, 66, 0.1));
          border: 2px solid rgba(255, 181, 71, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">üèÖ</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Torneios</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Ganhe pr√™mios!</div>
        </a>
        <a href="ranking-geral.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1));
          border: 2px solid rgba(16, 185, 129, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">üìä</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Ranking</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Veja sua posi√ß√£o!</div>
        </a>
        <a href="amigos.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.1));
          border: 2px solid rgba(59, 130, 246, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">üë•</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Amigos</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Conecte-se!</div>
        </a>
        <a href="chat.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(219, 39, 119, 0.1));
          border: 2px solid rgba(236, 72, 153, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">üí¨</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Chat</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Converse agora!</div>
        </a>
        <a href="bolsa.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(255, 181, 71, 0.25), rgba(255, 140, 66, 0.15));
          border: 2px solid rgba(255, 181, 71, 0.5);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
          box-shadow: 0 0 20px rgba(255, 181, 71, 0.15);
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">üìà</div>
          <div style="font-weight: 700; margin-bottom: 5px; color: #ffb547;">Bolsa de Times</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Compre e venda cotas!</div>
        </a>
      </div>
    </section>

    <!-- JOGOS ENCERRADOS (√∫ltimos 10) -->
    <section id="sectionFinished">
      <div class="section-header">
        <h2 class="section-title">‚úÖ Jogos Encerrados</h2>
        <span class="section-count" id="countFinished">0 jogos</span>
        <span class="scroll-hint" id="hintFinished"><span class="arrow">‚Üí</span> arraste</span>
      </div>
      <div class="games-scroll" id="gamesFinished">
        <div class="empty-state">
          <div class="empty-icon">‚úÖ</div>
          <p>Carregando jogos...</p>
        </div>
      </div>
    </section>

    <!-- INSTAGRAM BANNER -->
    <a href="https://www.instagram.com/yellup.app?igsh=MTNxNTZ0cjRzajdkcw==" target="_blank" rel="noopener noreferrer" class="instagram-banner">
      <div class="insta-icon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
        </svg>
      </div>
      <div class="insta-text">
        Siga @yellup.app<br>
        <span>Novidades, dicas e promo√ß√µes!</span>
      </div>
    </a>

  </div>

  <!-- MODAL QUIZ DI√ÅRIO DO TIME DO CORA√á√ÉO -->
  <div class="quiz-diario-overlay" id="quizDiarioOverlay">
    <div class="quiz-diario-card">
      <div class="quiz-diario-banner">
        <h2>‚öΩ Quiz Di√°rio do Cora√ß√£o</h2>
        <p>Teste seu conhecimento sobre seu time!</p>
      </div>
      <div class="quiz-diario-body">

        <!-- STEP 1: Convite -->
        <div class="quiz-step-convite" id="quizStepConvite">
          <div class="quiz-team-info">
            <span class="jersey-quiz" id="quizTeamJersey"></span>
            <span class="quiz-team-name" id="quizTeamName">Seu Time</span>
          </div>
          <p>Que tal responder <strong>uma pergunta</strong> sobre seu time do cora√ß√£o e ganhar <strong>XP</strong>? üéØ</p>
          <div class="quiz-convite-btns">
            <button class="btn-quiz-nao" onclick="fecharQuizDiario()">Agora n√£o</button>
            <button class="btn-quiz-sim" onclick="iniciarQuizDiario()">üéÆ Bora!</button>
          </div>
        </div>

        <!-- STEP 2: Pergunta -->
        <div class="quiz-step-pergunta" id="quizStepPergunta">
          <div class="quiz-xp-badge" id="quizXpBadge">‚≠ê Vale 5 XP</div>
          <div class="quiz-pergunta-texto" id="quizPerguntaTexto"></div>
          <div class="quiz-alternativas" id="quizAlternativas"></div>
        </div>

        <!-- STEP 3: Resultado -->
        <div class="quiz-step-resultado" id="quizStepResultado">
          <div class="quiz-resultado-icon" id="quizResultIcon"></div>
          <div class="quiz-resultado-titulo" id="quizResultTitulo"></div>
          <div class="quiz-resultado-msg" id="quizResultMsg"></div>
          <div class="quiz-xp-ganho" id="quizXpGanho"></div>
          <button class="btn-quiz-fechar" onclick="fecharQuizDiario()">üëç Continuar</button>
        </div>

      </div>
    </div>
  </div>

  <!-- MODAL DE ESCOLHA DE TIME -->
  <div class="modal-overlay" id="modalEscolha">
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚öΩ Escolha seu Time</h2>
        <p>Para qual time voc√™ vai torcer nesta partida?</p>
      </div>
      
      <div class="team-options">
        <div class="team-option" id="optionTeamA" onclick="confirmarEscolha('A')">
          <div class="jersey-modal" id="jerseyModalA"></div>
          <div class="team-name-modal" id="teamNameModalA">Time A</div>
        </div>
        <div class="team-option" id="optionTeamB" onclick="confirmarEscolha('B')">
          <div class="jersey-modal" id="jerseyModalB"></div>
          <div class="team-name-modal" id="teamNameModalB">Time B</div>
        </div>
      </div>

      <div class="modal-warning">
        ‚ö†Ô∏è Aten√ß√£o: Voc√™ n√£o poder√° mudar de time ap√≥s a escolha!
      </div>

      <div class="modal-actions">
        <button class="btn-cancel" onclick="fecharModal()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- BOTTOM NAV -->
  <nav class="bottom-nav">
    <div class="nav-content">
      <a href="painel.html" class="nav-item active">
        <span class="nav-icon">üè†</span>
        <span>In√≠cio</span>
      </a>
      <a href="ranking-geral.html" class="nav-item">
        <span class="nav-icon">üèÜ</span>
        <span>Ranking</span>
      </a>
      <a href="indicacoes.html" class="nav-item">
        <span class="nav-icon">üîó</span>
        <span>Indicar</span>
      </a>
      <a href="editar-perfil.html" class="nav-item">
        <span class="nav-icon">üë§</span>
        <span>Perfil</span>
      </a>
    </div>
  </nav>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

  <!-- FIREBASE -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  
  <!-- Utilit√°rio de Bandeiras -->
  <script src="js/bandeiras-utils.js"></script>
  
  <script>
    // ===================================
    // üî• CONFIGURA√á√ÉO FIREBASE
    // ===================================
    const firebaseConfig = {
      apiKey: "AIzaSyC5ZrkEy7KuCFJOtPvI7-P-JcA0MF4im5c",
      authDomain: "painel-yellup.firebaseapp.com",
      projectId: "painel-yellup",
      storageBucket: "painel-yellup.appspot.com",
      messagingSenderId: "608347210297",
      appId: "1:608347210297:web:75092713724e617c7203e8",
      measurementId: "G-SYZ16X31KQ"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // ===================================
    // üì¶ VARI√ÅVEIS GLOBAIS
    // ===================================
    let currentUserId = null;
    let currentUserData = null;
    let jogoAtual = null;  // Jogo sendo selecionado no modal

    // ===================================
    // üéñÔ∏è SISTEMA DE N√çVEIS
    // ===================================
    const NIVEIS = [
      { nome: 'Bronze', minXP: 0, classe: 'level-bronze', emoji: 'ü•â', cor: '#CD7F32' },
      { nome: 'Prata', minXP: 500, classe: 'level-prata', emoji: 'ü•à', cor: '#C0C0C0' },
      { nome: 'Ouro', minXP: 2000, classe: 'level-ouro', emoji: 'ü•á', cor: '#FFD700' },
      { nome: 'Diamante', minXP: 5000, classe: 'level-diamante', emoji: 'üíé', cor: '#B9F2FF' },
      { nome: 'Mestre', minXP: 10000, classe: 'level-mestre', emoji: 'üëë', cor: '#9B59B6' }
    ];

    function calcularNivel(xp) {
      let nivel = NIVEIS[0];
      for (const n of NIVEIS) {
        if (xp >= n.minXP) nivel = n;
      }
      return nivel;
    }

    function calcularProximoNivel(xp) {
      for (const n of NIVEIS) {
        if (xp < n.minXP) return n;
      }
      return null; // J√° √© mestre
    }

    function calcularProgressoNivel(xp) {
      const nivelAtual = calcularNivel(xp);
      const proximoNivel = calcularProximoNivel(xp);
      
      if (!proximoNivel) return 100; // Mestre
      
      const xpNoNivelAtual = xp - nivelAtual.minXP;
      const xpParaProximo = proximoNivel.minXP - nivelAtual.minXP;
      
      return Math.round((xpNoNivelAtual / xpParaProximo) * 100);
    }

    // ===================================
    // üëï FUN√á√ÉO PARA GERAR CAMISETA SVG
    // ===================================
    function gerarCamisetaSVG(corPrimaria, corSecundaria, corTerciaria) {
      corPrimaria = corPrimaria || '#28a745';
      corSecundaria = corSecundaria || '#ffffff';
      corTerciaria = corTerciaria || corPrimaria;
      
      return `
        <svg viewBox="0 0 100 120" xmlns="http://www.w3.org/2000/svg">
          <path d="M25,35 L25,110 L75,110 L75,35 L60,35 L60,25 C60,20 55,15 50,15 C45,15 40,20 40,25 L40,35 Z" 
                fill="${corPrimaria}" stroke="${corSecundaria}" stroke-width="2"/>
          <path d="M25,35 L5,50 L5,70 L25,60 Z" 
                fill="${corPrimaria}" stroke="${corSecundaria}" stroke-width="2"/>
          <path d="M75,35 L95,50 L95,70 L75,60 Z" 
                fill="${corPrimaria}" stroke="${corSecundaria}" stroke-width="2"/>
          <path d="M5,50 L15,55 L15,65 L5,70 Z" fill="${corTerciaria}"/>
          <path d="M95,50 L85,55 L85,65 L95,70 Z" fill="${corTerciaria}"/>
          <ellipse cx="50" cy="22" rx="12" ry="8" fill="${corSecundaria}"/>
          <ellipse cx="50" cy="22" rx="8" ry="5" fill="${corPrimaria}"/>
        </svg>
      `;
    }

    // ===================================
    // üí¨ TOAST
    // ===================================
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ===================================
    // üîê AUTENTICA√á√ÉO
    // ===================================
    auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
      .then(() => console.log("‚úÖ Persist√™ncia configurada"))
      .catch((error) => console.error("‚ùå Erro:", error));

    auth.onAuthStateChanged(async (user) => {
      console.log("üîç Verificando autentica√ß√£o...");
      
      if (!user) {
        console.log("‚ùå Usu√°rio n√£o autenticado");
        window.location.href = 'index.html';
        return;
      }

      console.log("‚úÖ Usu√°rio autenticado:", user.uid);
      currentUserId = user.uid;

      try {
        // Carregar dados do usu√°rio
        const userDoc = await db.collection('usuarios').doc(currentUserId).get();
        
        if (!userDoc.exists) {
          console.error("‚ùå Usu√°rio n√£o encontrado no banco!");
          showToast('‚ùå Erro: Usu√°rio n√£o encontrado');
          return;
        }

        currentUserData = userDoc.data();
        console.log("‚úÖ Dados do usu√°rio:", currentUserData);

        // Atualizar interface
        await atualizarPerfil();
        await carregarJogos();

        // ‚öΩ QUIZ DI√ÅRIO - Verificar se deve mostrar
        await verificarQuizDiario();

      } catch (error) {
        console.error("‚ùå Erro:", error);
        showToast('‚ùå Erro ao carregar dados');
      }
    });

    // ===================================
    // üë§ ATUALIZAR PERFIL
    // ===================================
    async function atualizarPerfil() {
      const nome = currentUserData.usuarioUnico || currentUserData.usuario || currentUserData.nome || 'Usu√°rio';
      const inicial = nome.charAt(0).toUpperCase();
      const xp = currentUserData.xp || 0;

      document.getElementById('userName').textContent = nome;
      document.getElementById('profileName').textContent = nome;
      
      // Avatar - mostrar foto se existir
      const userAvatarEl = document.getElementById('userAvatar');
      const profileAvatarEl = document.getElementById('profileAvatar');
      
      if (currentUserData.avatarUrl) {
        const imgStyle = 'width:100%;height:100%;object-fit:cover;border-radius:50%;';
        userAvatarEl.innerHTML = `<img src="${currentUserData.avatarUrl}" alt="Avatar" style="${imgStyle}">`;
        profileAvatarEl.innerHTML = `<img src="${currentUserData.avatarUrl}" alt="Avatar" style="${imgStyle}">`;
      } else {
        userAvatarEl.textContent = inicial;
        profileAvatarEl.textContent = inicial;
      }

      // Calcular n√≠vel
      const nivel = calcularNivel(xp);
      const proximoNivel = calcularProximoNivel(xp);
      const progresso = calcularProgressoNivel(xp);

      // Atualizar badge de n√≠vel
      const nivelBadge = document.getElementById('profileLevel');
      if (nivelBadge) {
        nivelBadge.innerHTML = `
          <span class="level-badge" style="background: ${nivel.cor}20; color: ${nivel.cor}; border: 1px solid ${nivel.cor}50;">
            ${nivel.emoji} ${nivel.nome}
          </span>
        `;
      }

      // Barra de progresso do n√≠vel
      const progressBar = document.getElementById('levelProgress');
      if (progressBar && proximoNivel) {
        progressBar.innerHTML = `
          <div style="font-size: 0.8em; color: #a9b5c6; margin-bottom: 5px;">
            ${xp} / ${proximoNivel.minXP} XP para ${proximoNivel.emoji} ${proximoNivel.nome}
          </div>
          <div style="height: 6px; background: rgba(0,0,0,0.3); border-radius: 3px; overflow: hidden;">
            <div style="width: ${progresso}%; height: 100%; background: linear-gradient(90deg, ${nivel.cor}, ${proximoNivel.cor}); border-radius: 3px;"></div>
          </div>
        `;
      } else if (progressBar) {
        progressBar.innerHTML = `
          <div style="font-size: 0.8em; color: #9B59B6;">
            üëë N√≠vel m√°ximo atingido!
          </div>
        `;
      }

      // Estat√≠sticas
      document.getElementById('statCredits').textContent = currentUserData.creditos || 0;
      document.getElementById('statXP').textContent = xp;
      
      const jogosParticipados = currentUserData.torcidas ? Object.keys(currentUserData.torcidas).length : 0;
      document.getElementById('statGames').textContent = jogosParticipados;

      const jogadasGratis = 5 - (currentUserData.jogadasGratis?.usadas || 0);
      document.getElementById('statFree').textContent = Math.max(0, jogadasGratis);

      // Time do cora√ß√£o
      if (currentUserData.timeId) {
        try {
          const timeDoc = await db.collection('times').doc(currentUserData.timeId).get();
          if (timeDoc.exists) {
            const time = { id: timeDoc.id, ...timeDoc.data() };
            const bandeira = getBandeira(time.codigoPais);
            document.getElementById('profileTeam').textContent = `‚ù§Ô∏è ${bandeira} ${time.nome}`;
            document.getElementById('profileTeamJersey').innerHTML = gerarCamisetaSVG(
              time.primaria, time.secundaria, time.terciaria
            ).replace('viewBox="0 0 100 120"', 'viewBox="0 0 100 120" width="30" height="35"');
          }
        } catch (e) {
          console.error("Erro ao buscar time:", e);
        }
      }
    }

    // ===================================
    // üéÆ CARREGAR JOGOS
    // ===================================
    async function carregarJogos() {
      try {
        console.log("üéÆ Carregando jogos...");

        const jogosSnap = await db.collection('jogos').orderBy('dataInicio', 'desc').get();
        
        const jogosLive = [];
        const jogosScheduled = [];
        const jogosFinished = [];
        const now = new Date();

        for (const doc of jogosSnap.docs) {
          const jogo = { id: doc.id, ...doc.data() };
          
          // Determinar status
          const inicio = jogo.dataInicio?.toDate ? jogo.dataInicio.toDate() : new Date(jogo.dataInicio);
          const fim = jogo.dataFim?.toDate ? jogo.dataFim.toDate() : null;

          // Guardar datas parseadas para ordena√ß√£o
          jogo._inicio = inicio;
          jogo._fim = fim;

          if (jogo.status === 'finalizado' || (fim && fim < now)) {
            jogo.statusCalc = 'ENCERRADO';
            jogosFinished.push(jogo);
          } else if (jogo.status === 'ao_vivo' || (inicio <= now && (!fim || fim > now))) {
            jogo.statusCalc = 'LIVE';
            jogosLive.push(jogo);
          } else {
            jogo.statusCalc = 'AGENDADO';
            jogosScheduled.push(jogo);
          }
        }

        // ====== ORDENA√á√ÉO ======
        // Live: come√ßaram antes primeiro (ASC por dataInicio)
        jogosLive.sort((a, b) => a._inicio - b._inicio);

        // Pr√≥ximos: v√£o come√ßar antes primeiro (ASC por dataInicio)
        jogosScheduled.sort((a, b) => a._inicio - b._inicio);

        // Encerrados: acabaram por √∫ltimo primeiro (DESC por dataFim ou dataInicio)
        jogosFinished.sort((a, b) => {
          const fimA = a._fim || a._inicio;
          const fimB = b._fim || b._inicio;
          return fimB - fimA;
        });

        // Limitar encerrados aos √∫ltimos 10
        const jogosFinishedLimitado = jogosFinished.slice(0, 10);

        console.log(`üìä Live: ${jogosLive.length}, Agendados: ${jogosScheduled.length}, Encerrados: ${jogosFinished.length} (mostrando ${jogosFinishedLimitado.length})`);

        // Renderizar
        await renderizarJogos('gamesLive', jogosLive, 'countLive');
        await renderizarJogos('gamesScheduled', jogosScheduled, 'countScheduled');
        await renderizarJogos('gamesFinished', jogosFinishedLimitado, 'countFinished');

        // Mostrar dica de scroll se tiver mais de 1 card
        if (jogosLive.length > 1) document.getElementById('hintLive').style.display = 'flex';
        if (jogosScheduled.length > 1) document.getElementById('hintScheduled').style.display = 'flex';
        if (jogosFinishedLimitado.length > 1) document.getElementById('hintFinished').style.display = 'flex';

      } catch (error) {
        console.error("‚ùå Erro ao carregar jogos:", error);
        showToast('‚ùå Erro ao carregar jogos');
      }
    }

    // ===================================
    // üìã RENDERIZAR JOGOS
    // ===================================
    async function renderizarJogos(containerId, jogos, countId) {
      const container = document.getElementById(containerId);
      const count = document.getElementById(countId);

      if (jogos.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">‚öΩ</div>
            <p>Nenhum jogo encontrado</p>
          </div>
        `;
        count.textContent = '0 jogos';
        return;
      }

      count.textContent = `${jogos.length} ${jogos.length === 1 ? 'jogo' : 'jogos'}`;

      // Processar jogos com informa√ß√µes dos times
      const jogosProcessados = await Promise.all(jogos.map(async jogo => {
        // Buscar dados dos times
        let timeCasaData = { nome: 'Time A', primaria: '#28a745', secundaria: '#fff', terciaria: '#28a745' };
        let timeForaData = { nome: 'Time B', primaria: '#dc3545', secundaria: '#fff', terciaria: '#dc3545' };

        try {
          if (jogo.timeCasaId) {
            const casaDoc = await db.collection('times').doc(jogo.timeCasaId).get();
            if (casaDoc.exists) timeCasaData = casaDoc.data();
          }
          if (jogo.timeForaId) {
            const foraDoc = await db.collection('times').doc(jogo.timeForaId).get();
            if (foraDoc.exists) timeForaData = foraDoc.data();
          }
        } catch (e) {
          console.error("Erro ao buscar times:", e);
        }

        // ‚úÖ VERIFICAR SE USU√ÅRIO J√Å ESCOLHEU TIME (do documento do usu√°rio)
        const torcidaEscolhida = currentUserData.torcidas?.[jogo.id];
        let nomeTimeTorcido = null;

        if (torcidaEscolhida) {
          // Encontrar qual time foi escolhido
          if (torcidaEscolhida === jogo.timeCasaId) {
            nomeTimeTorcido = timeCasaData.nome;
          } else if (torcidaEscolhida === jogo.timeForaId) {
            nomeTimeTorcido = timeForaData.nome;
          }
        }

        return {
          ...jogo,
          timeCasaData,
          timeForaData,
          torcidaEscolhida,
          nomeTimeTorcido
        };
      }));

      // Gerar HTML
      container.innerHTML = jogosProcessados.map(jogo => {
        const statusClass = jogo.statusCalc === 'LIVE' ? 'status-live' : 
                           jogo.statusCalc === 'AGENDADO' ? 'status-scheduled' : 'status-finished';
        
        const dataInicio = jogo.dataInicio?.toDate ? jogo.dataInicio.toDate() : new Date(jogo.dataInicio);

        // Contagem de torcida
        const torcidaCasa = jogo.torcidaCasaCount || 0;
        const torcidaFora = jogo.torcidaForaCount || 0;
        const totalTorcida = torcidaCasa + torcidaFora || 1;
        const percCasa = Math.round((torcidaCasa / totalTorcida) * 100);
        const percFora = 100 - percCasa;

        // Badge se j√° escolheu time
        let teamBadge = '';
        if (jogo.nomeTimeTorcido) {
          teamBadge = `<div class="team-badge">‚úÖ Torcendo: ${jogo.nomeTimeTorcido}</div>`;
        }

        // Bot√£o de a√ß√£o
        let actionButton = '';
        if (jogo.torcidaEscolhida) {
          // J√° escolheu - pode entrar
          actionButton = `
            <button class="btn-action btn-primary" onclick="entrarNoJogo('${jogo.id}')">
              ${jogo.statusCalc === 'LIVE' ? 'üî¥ Jogar Agora' : 'üìä Ver Jogo'}
            </button>
          `;
        } else if (jogo.statusCalc !== 'ENCERRADO') {
          // Ainda n√£o escolheu - mostra bot√£o para escolher
          actionButton = `
            <button class="btn-action btn-secondary" onclick="abrirModalEscolha('${jogo.id}')">
              ‚öΩ Escolher Time
            </button>
          `;
        } else {
          // Jogo encerrado e n√£o participou
          actionButton = `
            <button class="btn-action" style="background: #555; cursor: not-allowed;" disabled>
              N√£o participou
            </button>
          `;
        }

        // Gerar mini camisetas
        const jerseyCasa = gerarCamisetaSVG(
          jogo.timeCasaData.primaria, 
          jogo.timeCasaData.secundaria, 
          jogo.timeCasaData.terciaria
        ).replace('viewBox="0 0 100 120"', 'viewBox="0 0 100 120" class="jersey-mini"');

        const jerseyFora = gerarCamisetaSVG(
          jogo.timeForaData.primaria, 
          jogo.timeForaData.secundaria, 
          jogo.timeForaData.terciaria
        ).replace('viewBox="0 0 100 120"', 'viewBox="0 0 100 120" class="jersey-mini"');

        return `
          <div class="game-card">
            <div class="game-header">
              <div class="game-teams">
                <div class="team-name">
                  ${jerseyCasa}
                  ${jogo.timeCasaData.nome}
                </div>
                <div class="vs">vs</div>
                <div class="team-name">
                  ${jerseyFora}
                  ${jogo.timeForaData.nome}
                </div>
              </div>
              <div class="game-status ${statusClass}">${jogo.statusCalc}</div>
            </div>

            <div class="game-info">
              <div class="info-item">
                <div class="info-label">üìÖ Data</div>
                <div class="info-value">${dataInicio.toLocaleDateString('pt-BR')}</div>
              </div>
              <div class="info-item">
                <div class="info-label">‚è∞ Hora</div>
                <div class="info-value">${dataInicio.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}</div>
              </div>
              <div class="info-item">
                <div class="info-label">üí∞ Entrada</div>
                <div class="info-value">${jogo.valorEntrada || 0} cr√©d</div>
              </div>
            </div>

            ${teamBadge}

            <div class="torcida">
              <div class="torcida-header">
                <span>${torcidaCasa} (${percCasa}%)</span>
                <span>${torcidaFora} (${percFora}%)</span>
              </div>
              <div class="torcida-bar">
                <div class="torcida-fill-a" style="width: ${percCasa}%; background: ${jogo.timeCasaData?.primaria || '#2ecc71'} !important;"></div>
                <div class="torcida-fill-b" style="width: ${percFora}%; background: ${jogo.timeForaData?.primaria || '#e74c3c'} !important;"></div>
              </div>
            </div>

            <div class="game-actions">
              ${actionButton}
            </div>
          </div>
        `;
      }).join('');
    }

    // ===================================
    // ‚öΩ MODAL DE ESCOLHA DE TIME
    // ===================================
    async function abrirModalEscolha(jogoId) {
      console.log("üéØ Abrindo modal para jogo:", jogoId);

      try {
        // Buscar dados do jogo
        const jogoDoc = await db.collection('jogos').doc(jogoId).get();
        if (!jogoDoc.exists) {
          showToast('‚ùå Jogo n√£o encontrado');
          return;
        }

        const jogo = { id: jogoId, ...jogoDoc.data() };

        // Buscar dados dos times
        let timeCasaData = { nome: 'Time A', primaria: '#28a745', secundaria: '#fff', terciaria: '#28a745' };
        let timeForaData = { nome: 'Time B', primaria: '#dc3545', secundaria: '#fff', terciaria: '#dc3545' };

        if (jogo.timeCasaId) {
          const casaDoc = await db.collection('times').doc(jogo.timeCasaId).get();
          if (casaDoc.exists) timeCasaData = { id: jogo.timeCasaId, ...casaDoc.data() };
        }
        if (jogo.timeForaId) {
          const foraDoc = await db.collection('times').doc(jogo.timeForaId).get();
          if (foraDoc.exists) timeForaData = { id: jogo.timeForaId, ...foraDoc.data() };
        }

        // Salvar jogo atual para usar na confirma√ß√£o
        jogoAtual = {
          id: jogoId,
          timeCasaId: jogo.timeCasaId,
          timeForaId: jogo.timeForaId,
          timeCasaData,
          timeForaData
        };

        // Atualizar modal
        document.getElementById('teamNameModalA').textContent = timeCasaData.nome;
        document.getElementById('teamNameModalB').textContent = timeForaData.nome;

        document.getElementById('jerseyModalA').innerHTML = gerarCamisetaSVG(
          timeCasaData.primaria, timeCasaData.secundaria, timeCasaData.terciaria
        );
        document.getElementById('jerseyModalB').innerHTML = gerarCamisetaSVG(
          timeForaData.primaria, timeForaData.secundaria, timeForaData.terciaria
        );

        // Aplicar cores de borda
        document.getElementById('optionTeamA').style.borderColor = timeCasaData.primaria;
        document.getElementById('optionTeamB').style.borderColor = timeForaData.primaria;

        // Mostrar modal
        document.getElementById('modalEscolha').classList.add('active');

      } catch (error) {
        console.error("‚ùå Erro ao abrir modal:", error);
        showToast('‚ùå Erro ao carregar times');
      }
    }

    function fecharModal() {
      document.getElementById('modalEscolha').classList.remove('active');
      jogoAtual = null;
    }

    // ===================================
    // ‚úÖ CONFIRMAR ESCOLHA DE TIME
    // ===================================
    async function confirmarEscolha(lado) {
      if (!jogoAtual) {
        showToast('‚ùå Erro: Jogo n√£o selecionado');
        return;
      }

      const timeEscolhidoId = lado === 'A' ? jogoAtual.timeCasaId : jogoAtual.timeForaId;
      const timeEscolhidoNome = lado === 'A' ? jogoAtual.timeCasaData.nome : jogoAtual.timeForaData.nome;

      console.log("‚úÖ Confirmando escolha:");
      console.log("   Jogo:", jogoAtual.id);
      console.log("   Time ID:", timeEscolhidoId);
      console.log("   Time Nome:", timeEscolhidoNome);

      // Confirmar
      if (!confirm(`Voc√™ quer torcer para ${timeEscolhidoNome}?\n\n‚ö†Ô∏è Esta escolha n√£o pode ser alterada!`)) {
        return;
      }

      try {
        showToast('üíæ Salvando...');

        // 1. Atualizar documento do usu√°rio com o timeId real
        await db.collection('usuarios').doc(currentUserId).update({
          [`torcidas.${jogoAtual.id}`]: timeEscolhidoId
        });

        // 2. Atualizar contador do jogo
        const campoContador = lado === 'A' ? 'torcidaCasaCount' : 'torcidaForaCount';
        await db.collection('jogos').doc(jogoAtual.id).update({
          [campoContador]: firebase.firestore.FieldValue.increment(1)
        });

        // 3. Atualizar dados locais
        if (!currentUserData.torcidas) currentUserData.torcidas = {};
        currentUserData.torcidas[jogoAtual.id] = timeEscolhidoId;

        console.log("‚úÖ Escolha salva com sucesso!");
        showToast(`‚úÖ Voc√™ est√° torcendo para ${timeEscolhidoNome}!`);

        // Fechar modal
        fecharModal();

        // Recarregar jogos
        await carregarJogos();

        // Redirecionar para o jogo ap√≥s 1 segundo
        setTimeout(() => {
          entrarNoJogo(jogoAtual.id);
        }, 1000);

      } catch (error) {
        console.error("‚ùå Erro ao salvar:", error);
        showToast('‚ùå Erro ao salvar escolha. Tente novamente!');
      }
    }

    // ===================================
    // üéÆ ENTRAR NO JOGO
    // ===================================
    function entrarNoJogo(jogoId) {
      window.location.href = `painel-jogo.html?jogoId=${jogoId}`;
    }

    // ===================================
    // üö™ LOGOUT
    // ===================================
    function logout() {
      if (confirm('Deseja realmente sair?')) {
        auth.signOut().then(() => {
          window.location.href = 'index.html';
        });
      }
    }

    // ===================================
    // ‚öΩ QUIZ DI√ÅRIO DO TIME DO CORA√á√ÉO
    // ===================================
    let quizDiarioPerguntaAtual = null;

    /**
     * Verifica se deve mostrar o quiz di√°rio
     * Regras:
     *  1. Usu√°rio precisa ter um timeId (time do cora√ß√£o)
     *  2. N√£o pode ter respondido hoje (verificado via Firestore)
     *  3. N√£o pode j√° ter sido exibido nesta sess√£o (sessionStorage)
     */
    async function verificarQuizDiario() {
      try {
        // J√° exibiu nesta sess√£o? N√£o mostra de novo (reload/navega√ß√£o)
        if (sessionStorage.getItem('yellup_quiz_diario_exibido')) {
          console.log("üìã Quiz di√°rio: j√° exibido nesta sess√£o, pulando.");
          return;
        }

        // Tem time do cora√ß√£o?
        if (!currentUserData.timeId) {
          console.log("üìã Quiz di√°rio: usu√°rio n√£o tem time do cora√ß√£o.");
          return;
        }

        // J√° respondeu hoje?
        const hoje = new Date().toISOString().split('T')[0]; // "YYYY-MM-DD"
        const ultimoQuiz = currentUserData.ultimoQuizDiario || '';

        if (ultimoQuiz === hoje) {
          console.log("üìã Quiz di√°rio: j√° respondeu hoje (" + hoje + ").");
          // Marca sess√£o para n√£o checar de novo
          sessionStorage.setItem('yellup_quiz_diario_exibido', 'true');
          return;
        }

        // Buscar dados do time para exibir no modal
        const timeDoc = await db.collection('times').doc(currentUserData.timeId).get();
        if (!timeDoc.exists) {
          console.log("üìã Quiz di√°rio: time n√£o encontrado no banco.");
          return;
        }

        const timeData = timeDoc.data();

        // Preencher info do time no modal
        document.getElementById('quizTeamName').textContent = timeData.nome || 'Seu Time';
        document.getElementById('quizTeamJersey').innerHTML = gerarCamisetaSVG(
          timeData.primaria, timeData.secundaria, timeData.terciaria
        );

        // Marcar sess√£o como exibido (mesmo que o user feche sem responder)
        sessionStorage.setItem('yellup_quiz_diario_exibido', 'true');

        // Pequeno delay para o painel carregar e n√£o competir visualmente
        setTimeout(() => {
          document.getElementById('quizDiarioOverlay').classList.add('active');
        }, 1200);

        console.log("‚úÖ Quiz di√°rio: mostrando convite para " + timeData.nome);

      } catch (error) {
        console.error("‚ùå Erro no quiz di√°rio:", error);
      }
    }

    /**
     * Usu√°rio aceitou: busca pergunta aleat√≥ria e exibe
     */
    async function iniciarQuizDiario() {
      try {
        // Esconder convite, mostrar loading no bot√£o
        const btnSim = document.querySelector('.btn-quiz-sim');
        btnSim.textContent = '‚è≥ Buscando...';
        btnSim.disabled = true;

        // Buscar perguntas do time do cora√ß√£o
        const perguntasSnap = await db.collection('perguntas')
          .where('timeId', '==', currentUserData.timeId)
          .get();

        if (perguntasSnap.empty) {
          showToast('üòî Ainda n√£o temos perguntas sobre seu time. Em breve!');
          fecharQuizDiario();
          return;
        }

        // Escolher uma pergunta aleat√≥ria
        // Tentar evitar repetir a √∫ltima pergunta respondida
        const todasPerguntas = perguntasSnap.docs;
        const ultimaPerguntaId = currentUserData.ultimaQuizDiarioPerguntaId || '';
        
        let perguntasFiltradas = todasPerguntas.filter(doc => doc.id !== ultimaPerguntaId);
        if (perguntasFiltradas.length === 0) perguntasFiltradas = todasPerguntas;

        const randomIndex = Math.floor(Math.random() * perguntasFiltradas.length);
        const perguntaDoc = perguntasFiltradas[randomIndex];
        
        quizDiarioPerguntaAtual = {
          id: perguntaDoc.id,
          ...perguntaDoc.data()
        };

        // Preencher a pergunta
        const pontuacao = quizDiarioPerguntaAtual.pontuacao || 5;
        document.getElementById('quizXpBadge').textContent = `‚≠ê Acertou = +${pontuacao} XP | Participou = +2 XP`;
        document.getElementById('quizPerguntaTexto').textContent = quizDiarioPerguntaAtual.pergunta;

        // Gerar alternativas
        const alternativas = quizDiarioPerguntaAtual.alternativas;
        const container = document.getElementById('quizAlternativas');
        container.innerHTML = '';

        ['A', 'B', 'C', 'D'].forEach(letra => {
          if (alternativas[letra]) {
            const btn = document.createElement('button');
            btn.className = 'quiz-alt-btn';
            btn.innerHTML = `
              <span class="alt-letra">${letra}</span>
              <span>${alternativas[letra]}</span>
            `;
            btn.onclick = () => responderQuizDiario(letra, btn);
            container.appendChild(btn);
          }
        });

        // Transi√ß√£o: convite ‚Üí pergunta
        document.getElementById('quizStepConvite').style.display = 'none';
        document.getElementById('quizStepPergunta').style.display = 'block';

      } catch (error) {
        console.error("‚ùå Erro ao buscar pergunta:", error);
        showToast('‚ùå Erro ao carregar pergunta. Tente novamente!');
        fecharQuizDiario();
      }
    }

    /**
     * Usu√°rio respondeu a pergunta
     */
    async function responderQuizDiario(letraEscolhida, btnClicado) {
      if (!quizDiarioPerguntaAtual) return;

      // Desabilitar todos os bot√µes
      const todosBtn = document.querySelectorAll('.quiz-alt-btn');
      todosBtn.forEach(btn => {
        btn.classList.add('disabled');
        btn.onclick = null;
      });

      const correta = quizDiarioPerguntaAtual.correta;
      const acertou = letraEscolhida === correta;
      const pontuacaoBase = quizDiarioPerguntaAtual.pontuacao || 5;
      const xpGanho = acertou ? pontuacaoBase : 2;

      // Marcar visualmente
      if (acertou) {
        btnClicado.classList.add('correta');
      } else {
        btnClicado.classList.add('errada');
        // Mostrar qual era a correta
        todosBtn.forEach(btn => {
          if (btn.querySelector('.alt-letra').textContent === correta) {
            btn.classList.add('correta');
            btn.classList.remove('disabled');
          }
        });
      }

      // Salvar no Firestore
      const hoje = new Date().toISOString().split('T')[0];
      try {
        await db.collection('usuarios').doc(currentUserId).update({
          ultimoQuizDiario: hoje,
          ultimaQuizDiarioPerguntaId: quizDiarioPerguntaAtual.id,
          xp: firebase.firestore.FieldValue.increment(xpGanho),
          quizDiarioTotal: firebase.firestore.FieldValue.increment(1),
          quizDiarioAcertos: acertou
            ? firebase.firestore.FieldValue.increment(1)
            : firebase.firestore.FieldValue.increment(0)
        });

        // Atualizar dados locais
        currentUserData.ultimoQuizDiario = hoje;
        currentUserData.ultimaQuizDiarioPerguntaId = quizDiarioPerguntaAtual.id;
        currentUserData.xp = (currentUserData.xp || 0) + xpGanho;

        console.log(`‚úÖ Quiz di√°rio: ${acertou ? 'ACERTOU' : 'ERROU'} ‚Üí +${xpGanho} XP`);
      } catch (error) {
        console.error("‚ùå Erro ao salvar quiz di√°rio:", error);
      }

      // Ap√≥s 1.5s, mostrar resultado
      setTimeout(() => {
        mostrarResultadoQuiz(acertou, xpGanho);
      }, 1500);
    }

    /**
     * Exibe o step de resultado final
     */
    function mostrarResultadoQuiz(acertou, xpGanho) {
      document.getElementById('quizStepPergunta').style.display = 'none';
      document.getElementById('quizStepResultado').style.display = 'block';

      if (acertou) {
        document.getElementById('quizResultIcon').textContent = 'üéâ';
        document.getElementById('quizResultTitulo').textContent = 'Mandou bem!';
        document.getElementById('quizResultTitulo').className = 'quiz-resultado-titulo acertou';
        document.getElementById('quizResultMsg').textContent = 
          'Voc√™ conhece bem seu time do cora√ß√£o! Volte amanh√£ para mais uma pergunta.';
      } else {
        document.getElementById('quizResultIcon').textContent = 'üí™';
        document.getElementById('quizResultTitulo').textContent = 'Quase l√°!';
        document.getElementById('quizResultTitulo').className = 'quiz-resultado-titulo errou';
        document.getElementById('quizResultMsg').textContent = 
          'Continue tentando! Aproveite nossa plataforma para aprender mais sobre futebol. Volte amanh√£!';
      }

      document.getElementById('quizXpGanho').textContent = `‚≠ê +${xpGanho} XP`;

      // Atualizar XP exibido no perfil sem recarregar
      document.getElementById('statXP').textContent = currentUserData.xp || 0;

      // Atualizar n√≠vel se mudou
      const nivel = calcularNivel(currentUserData.xp);
      const proximoNivel = calcularProximoNivel(currentUserData.xp);
      const progresso = calcularProgressoNivel(currentUserData.xp);

      const nivelBadge = document.getElementById('profileLevel');
      if (nivelBadge) {
        nivelBadge.innerHTML = `
          <span class="level-badge" style="background: ${nivel.cor}20; color: ${nivel.cor}; border: 1px solid ${nivel.cor}50;">
            ${nivel.emoji} ${nivel.nome}
          </span>
        `;
      }

      const progressBar = document.getElementById('levelProgress');
      if (progressBar && proximoNivel) {
        progressBar.innerHTML = `
          <div style="font-size: 0.8em; color: #a9b5c6; margin-bottom: 5px;">
            ${currentUserData.xp} / ${proximoNivel.minXP} XP para ${proximoNivel.emoji} ${proximoNivel.nome}
          </div>
          <div style="height: 6px; background: rgba(0,0,0,0.3); border-radius: 3px; overflow: hidden;">
            <div style="width: ${progresso}%; height: 100%; background: linear-gradient(90deg, ${nivel.cor}, ${proximoNivel.cor}); border-radius: 3px;"></div>
          </div>
        `;
      }
    }

    /**
     * Fechar modal e resetar steps
     */
    function fecharQuizDiario() {
      document.getElementById('quizDiarioOverlay').classList.remove('active');

      // Resetar para o estado inicial (caso abra amanh√£)
      setTimeout(() => {
        document.getElementById('quizStepConvite').style.display = 'block';
        document.getElementById('quizStepPergunta').style.display = 'none';
        document.getElementById('quizStepResultado').style.display = 'none';

        // Resetar bot√£o
        const btnSim = document.querySelector('.btn-quiz-sim');
        if (btnSim) {
          btnSim.textContent = 'üéÆ Bora!';
          btnSim.disabled = false;
        }

        quizDiarioPerguntaAtual = null;
      }, 400);
    }

    // Fechar quiz di√°rio ao clicar no overlay (fora do card)
    document.getElementById('quizDiarioOverlay').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharQuizDiario();
      }
    });

    // ===================================
    // FIM QUIZ DI√ÅRIO
    // ===================================

    // Fechar modal ao clicar fora
    document.getElementById('modalEscolha').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharModal();
      }
    });

    console.log("‚úÖ Yellup Painel v7.0 - Scroll Lateral + Instagram + Ordena√ß√£o!");
  </script>

</body>
</html>
