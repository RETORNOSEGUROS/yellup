<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painel - Yellup</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* Cores principais - mais quentes e vibrantes */
      --bg-dark: #0a0e13;
      --bg-card: #131920;
      --bg-elevated: #1a2230;
      --accent-primary: #ff9f43;
      --accent-secondary: #ffc048;
      --accent-glow: rgba(255, 159, 67, 0.25);
      --live-red: #ff4757;
      --win-green: #2ed573;
      --text-primary: #f1f2f6;
      --text-secondary: #a4b0be;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-dark);
      background-image: 
        radial-gradient(ellipse at top, rgba(255, 159, 67, 0.03) 0%, transparent 50%),
        radial-gradient(ellipse at bottom, rgba(26, 34, 48, 0.5) 0%, transparent 50%);
      background-attachment: fixed;
      color: var(--text-primary);
      min-height: 100vh;
      padding-bottom: 100px;
    }

    /* ==================== HEADER ==================== */
    .header {
      background: rgba(10, 14, 19, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 12px 16px;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 159, 67, 0.1);
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.8em;
      font-weight: 800;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .user-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 1.2em;
      color: #0e141b;
    }

    .user-name {
      font-weight: 600;
    }

    .btn-logout {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: #e7eef7;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
    }

    .btn-logout:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* ==================== CONTAINER ==================== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    /* ==================== PERFIL DO USUÃRIO ==================== */
    .user-profile {
      background: linear-gradient(145deg, var(--bg-card) 0%, var(--bg-elevated) 100%);
      border: 1px solid rgba(255, 159, 67, 0.15);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 20px;
      position: relative;
      overflow: hidden;
    }

    .user-profile::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary), var(--accent-primary));
      background-size: 200% 100%;
      animation: shimmerBar 3s linear infinite;
    }

    @keyframes shimmerBar {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* ==================== SLIDESHOW DE FUNDO DO PERFIL ==================== */
    .profile-bg-slideshow {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 0;
    }

    .profile-bg-slide {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
    }

    .profile-bg-slide.active {
      opacity: 1;
    }

    .profile-bg-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        135deg, 
        rgba(14, 20, 27, 0.85) 0%, 
        rgba(14, 20, 27, 0.75) 50%,
        rgba(14, 20, 27, 0.9) 100%
      );
      z-index: 1;
    }

    /* Quando tem fotos, escurecer mais para legibilidade */
    .user-profile.has-bg-photos .profile-bg-overlay {
      background: linear-gradient(
        135deg, 
        rgba(14, 20, 27, 0.88) 0%, 
        rgba(14, 20, 27, 0.78) 50%,
        rgba(14, 20, 27, 0.92) 100%
      );
    }

    /* Garantir que conteÃºdo fique acima do slideshow */
    .user-profile .profile-header,
    .user-profile #levelProgress,
    .user-profile .user-stats {
      position: relative;
      z-index: 2;
    }

    /* Indicador de slides (opcional - mostrar bolinhas) */
    .profile-bg-indicators {
      position: absolute;
      bottom: 10px;
      right: 16px;
      display: flex;
      gap: 6px;
      z-index: 3;
    }

    .profile-bg-indicators .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }

    .profile-bg-indicators .dot.active {
      background: var(--accent-secondary);
      transform: scale(1.2);
    }

    /* ==================== BARRA DE AÃ‡ÃƒO RÃPIDA ==================== */
    .quick-action-bar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      padding: 16px;
      background: linear-gradient(135deg, rgba(255, 159, 67, 0.12) 0%, rgba(255, 71, 87, 0.08) 100%);
      border: 1px solid rgba(255, 159, 67, 0.25);
      border-radius: 16px;
      align-items: center;
    }

    .quick-action-icon {
      font-size: 2em;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .quick-action-content {
      flex: 1;
    }

    .quick-action-title {
      font-weight: 700;
      font-size: 0.95em;
      margin-bottom: 2px;
    }

    .quick-action-desc {
      font-size: 0.8em;
      color: var(--text-secondary);
    }

    .quick-action-btn {
      padding: 12px 20px;
      background: linear-gradient(135deg, var(--accent-primary) 0%, #ff8c42 100%);
      border: none;
      border-radius: 12px;
      color: var(--bg-dark);
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 0.85em;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px var(--accent-glow);
    }

    .quick-action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px var(--accent-glow);
    }

    /* ==================== STREAK / SEQUÃŠNCIA ==================== */
    .streak-mini {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: linear-gradient(135deg, rgba(255, 159, 67, 0.1), rgba(255, 192, 72, 0.05));
      border: 1px solid rgba(255, 159, 67, 0.2);
      border-radius: 14px;
      margin-bottom: 20px;
    }

    .streak-fire {
      font-size: 1.8em;
      animation: fireGlow 1.5s ease-in-out infinite alternate;
    }

    @keyframes fireGlow {
      from { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 159, 67, 0.3)); }
      to { filter: brightness(1.2) drop-shadow(0 0 15px rgba(255, 159, 67, 0.6)); }
    }

    .streak-info {
      flex: 1;
    }

    .streak-count {
      font-weight: 800;
      font-size: 1.1em;
      color: var(--accent-secondary);
    }

    .streak-label {
      font-size: 0.75em;
      color: var(--text-secondary);
    }

    .streak-bonus {
      padding: 6px 12px;
      background: rgba(46, 213, 115, 0.15);
      border: 1px solid rgba(46, 213, 115, 0.3);
      border-radius: 20px;
      font-size: 0.7em;
      font-weight: 600;
      color: var(--win-green);
    }

    /* ==================== ONLINE / COMUNIDADE ==================== */
    .community-bar {
      display: flex;
      justify-content: center;
      gap: 24px;
      padding: 12px 16px;
      background: var(--bg-card);
      border-radius: 12px;
      margin-bottom: 24px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .community-stat {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8em;
    }

    .pulse-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      animation: pulseDot 2s ease-in-out infinite;
    }

    .pulse-dot.online { background: var(--win-green); }
    .pulse-dot.live { background: var(--live-red); }

    @keyframes pulseDot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(0.8); }
    }

    .community-stat strong {
      color: var(--accent-secondary);
    }

    /* ==================== CARROSSEL DE DICAS / STORIES ==================== */
    .tips-carousel {
      position: relative;
      margin-bottom: 20px;
      border-radius: 16px;
      overflow: hidden;
      height: 140px;
    }

    .tips-slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.5s ease;
      display: flex;
      align-items: center;
      padding: 20px;
      cursor: pointer;
      background-size: cover;
      background-position: center;
    }

    .tips-slide.active {
      opacity: 1;
    }

    .tips-slide::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(10, 14, 19, 0.85) 0%, rgba(10, 14, 19, 0.7) 100%);
    }

    .tips-slide-content {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      gap: 16px;
      width: 100%;
    }

    .tips-icon {
      font-size: 3em;
      flex-shrink: 0;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
    }

    .tips-text {
      flex: 1;
    }

    .tips-title {
      font-size: 1.1em;
      font-weight: 700;
      margin-bottom: 4px;
      color: var(--text-primary);
    }

    .tips-desc {
      font-size: 0.85em;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    .tips-badge {
      padding: 6px 14px;
      background: var(--accent-primary);
      color: var(--bg-dark);
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      white-space: nowrap;
    }

    /* Indicadores do carrossel */
    .tips-indicators {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 6px;
      z-index: 2;
    }

    .tips-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .tips-dot.active {
      background: var(--accent-primary);
      width: 24px;
      border-radius: 4px;
    }

    /* Barra de progresso automÃ¡tico */
    .tips-progress {
      position: absolute;
      top: 0;
      left: 0;
      height: 3px;
      background: var(--accent-primary);
      width: 0%;
      z-index: 3;
    }

    .tips-slide.active .tips-progress-active {
      animation: progressBar 5s linear forwards;
    }

    @keyframes progressBar {
      from { width: 0%; }
      to { width: 100%; }
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 25px;
    }

    .profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      font-weight: 800;
      color: #0e141b;
    }

    .profile-info h2 {
      font-size: 1.5em;
      margin-bottom: 5px;
    }

    .level-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .profile-team {
      color: #a9b5c6;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .user-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }

    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      padding: 14px 10px;
      border-radius: 14px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }

    .stat-card:hover {
      background: rgba(255, 159, 67, 0.1);
      border-color: rgba(255, 159, 67, 0.3);
      transform: translateY(-2px);
    }

    .stat-card:active {
      transform: scale(0.97);
    }

    .stat-value {
      font-size: 1.5em;
      font-weight: 800;
      color: var(--accent-secondary);
      line-height: 1.2;
    }

    .stat-label {
      font-size: 0.7em;
      color: var(--text-secondary);
      margin-top: 2px;
    }

    /* ==================== SEÃ‡ÃƒO DE JOGOS ==================== */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 1.4em;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-count {
      font-size: 0.9em;
      color: #a9b5c6;
    }

    /* ==================== SCROLL HORIZONTAL DE JOGOS ==================== */
    .games-scroll {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      overflow-y: hidden;
      padding-bottom: 12px;
      margin-bottom: 30px;
      scroll-snap-type: x proximity;
      -webkit-overflow-scrolling: touch;
    }

    /* Scrollbar estilizada */
    .games-scroll::-webkit-scrollbar {
      height: 6px;
    }

    .games-scroll::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    .games-scroll::-webkit-scrollbar-thumb {
      background: rgba(255, 181, 71, 0.3);
      border-radius: 3px;
    }

    .games-scroll::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 181, 71, 0.5);
    }

    .games-scroll .empty-state {
      min-width: 100%;
    }

    /* ==================== CARD DO JOGO - REDESIGN MODERNO ==================== */
    .game-card {
      background: var(--bg-card);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 16px;
      padding: 0;
      transition: all 0.3s ease;
      min-width: 280px;
      max-width: 300px;
      flex-shrink: 0;
      scroll-snap-align: start;
      overflow: hidden;
      position: relative;
    }

    .game-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 159, 67, 0.25);
    }

    .game-card:active {
      transform: scale(0.98);
    }

    /* Header do card com status */
    .game-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 14px;
      background: rgba(0, 0, 0, 0.3);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .game-league {
      font-size: 0.7em;
      color: var(--text-secondary);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .game-league-icon {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.1);
    }

    .game-status {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.65em;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .status-live {
      background: var(--live-red);
      animation: pulse-live 2s ease-in-out infinite;
      box-shadow: 0 0 15px rgba(255, 71, 87, 0.4);
    }

    .status-live::before {
      content: '';
      width: 5px;
      height: 5px;
      background: white;
      border-radius: 50%;
      animation: blink 1s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .status-scheduled {
      background: rgba(59, 130, 246, 0.2);
      color: #60a5fa;
      border: 1px solid rgba(59, 130, 246, 0.3);
    }

    .status-finished {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-secondary);
    }

    /* Corpo do card - Times lado a lado */
    .game-card-body {
      padding: 16px;
    }

    .game-matchup {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
    }

    .game-team {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      flex: 1;
      gap: 8px;
    }

    .game-team-jersey {
      width: 44px;
      height: 52px;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    }

    .game-team-name {
      font-size: 0.8em;
      font-weight: 600;
      color: var(--text-primary);
      max-width: 90px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .game-team.winner .game-team-name {
      color: var(--win-green);
    }

    /* Info central (sem placar) */
    .game-center-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0 10px;
      min-width: 70px;
    }

    .game-live-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(255, 71, 87, 0.15);
      border: 1px solid rgba(255, 71, 87, 0.3);
      border-radius: 20px;
      font-size: 0.7em;
      font-weight: 700;
      color: var(--live-red);
      margin-bottom: 4px;
    }

    .live-pulse {
      width: 8px;
      height: 8px;
      background: var(--live-red);
      border-radius: 50%;
      animation: livePulse 1.5s ease-in-out infinite;
    }

    @keyframes livePulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(0.8); }
    }

    .game-datetime-box {
      text-align: center;
    }

    .game-datetime-box .game-date {
      font-size: 1em;
      font-weight: 700;
      color: var(--text-primary);
    }

    .game-datetime-box .game-hour {
      font-size: 0.85em;
      color: var(--accent-secondary);
      font-weight: 600;
    }

    .game-datetime-box.finished .game-date,
    .game-datetime-box.finished .game-hour {
      color: var(--text-secondary);
    }

    .game-finished-indicator {
      padding: 6px 12px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      font-size: 0.7em;
      font-weight: 600;
      color: var(--text-secondary);
    }

    /* Placar central (se usado no futuro) */
    .game-score-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 12px;
    }

    .game-score {
      font-size: 1.6em;
      font-weight: 800;
      letter-spacing: 2px;
      color: var(--text-primary);
    }

    .game-score-divider {
      width: 20px;
      height: 2px;
      background: rgba(255, 255, 255, 0.2);
      margin: 4px 0;
      border-radius: 1px;
    }

    .game-time-info {
      font-size: 0.7em;
      color: var(--text-secondary);
      text-align: center;
    }

    .game-time-info.live {
      color: var(--live-red);
      font-weight: 600;
    }

    /* VS para jogos agendados */
    .game-vs {
      font-size: 1em;
      font-weight: 700;
      color: var(--text-secondary);
      padding: 8px 0;
    }

    .game-datetime {
      text-align: center;
    }

    .game-date {
      font-size: 0.9em;
      font-weight: 700;
      color: var(--text-primary);
    }

    .game-hour {
      font-size: 0.75em;
      color: var(--text-secondary);
    }

    /* ==================== BARRA DE TORCIDA VISUAL ==================== */
    .torcida-section {
      padding: 0 16px 12px;
    }

    .torcida-label {
      font-size: 0.65em;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      text-align: center;
    }

    /* SeÃ§Ã£o de pontos com estilo diferenciado */
    .pontos-section {
      margin-top: 4px;
      padding-top: 10px;
      border-top: 1px dashed rgba(255,255,255,0.08);
    }

    .pontos-section .torcida-label {
      color: var(--accent-secondary);
    }

    .torcida-visual {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .torcida-side {
      display: flex;
      align-items: center;
      gap: 6px;
      flex: 1;
    }

    .torcida-side.left {
      justify-content: flex-end;
    }

    .torcida-side.right {
      justify-content: flex-start;
    }

    .torcida-percent {
      font-size: 0.85em;
      font-weight: 700;
      min-width: 36px;
    }

    .torcida-side.left .torcida-percent {
      text-align: right;
    }

    .torcida-side.right .torcida-percent {
      text-align: left;
    }

    .torcida-bar-container {
      flex: 1;
      height: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 4px;
      overflow: hidden;
      display: flex;
    }

    .torcida-bar-fill {
      height: 100%;
      transition: width 0.5s ease;
      position: relative;
    }

    .torcida-bar-fill.left {
      border-radius: 4px 0 0 4px;
    }

    .torcida-bar-fill.right {
      border-radius: 0 4px 4px 0;
    }

    /* Efeito de brilho na barra de quem estÃ¡ ganhando */
    .torcida-bar-fill.winning {
      box-shadow: 0 0 10px currentColor;
    }

    .torcida-bar-fill.winning::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmerBar 2s infinite;
    }

    /* ==================== CRÃ‰DITOS EM DISPUTA ==================== */
    .creditos-disputa {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 16px;
      margin: 0 16px 12px;
      background: linear-gradient(135deg, rgba(255, 159, 67, 0.12), rgba(255, 192, 72, 0.06));
      border: 1px solid rgba(255, 159, 67, 0.25);
      border-radius: 10px;
    }

    .creditos-icon {
      font-size: 1.1em;
    }

    .creditos-valor {
      font-size: 1.2em;
      font-weight: 800;
      color: var(--accent-secondary);
    }

    .creditos-label {
      font-size: 0.75em;
      color: var(--text-secondary);
    }

    /* Destaque maior quando tem muitos crÃ©ditos */
    .creditos-disputa.high-value {
      background: linear-gradient(135deg, rgba(255, 159, 67, 0.2), rgba(255, 192, 72, 0.1));
      border-color: rgba(255, 159, 67, 0.4);
      animation: creditsPulse 2s ease-in-out infinite;
    }

    @keyframes creditsPulse {
      0%, 100% { box-shadow: 0 0 0 rgba(255, 159, 67, 0); }
      50% { box-shadow: 0 0 15px rgba(255, 159, 67, 0.2); }
    }

    /* Badge "VocÃª torceu" */
    .user-cheered {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 8px 12px;
      margin: 0 16px 12px;
      background: linear-gradient(135deg, rgba(46, 213, 115, 0.15), rgba(46, 213, 115, 0.05));
      border: 1px solid rgba(46, 213, 115, 0.3);
      border-radius: 10px;
      font-size: 0.75em;
      font-weight: 600;
      color: var(--win-green);
    }

    .user-cheered-jersey {
      width: 18px;
      height: 22px;
    }

    /* ==================== BOTÃƒO DE AÃ‡ÃƒO DO CARD ==================== */
    .game-card-action {
      padding: 12px 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .btn-game {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 0.85em;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-game:active {
      transform: scale(0.97);
    }

    .btn-game.primary {
      background: linear-gradient(135deg, var(--accent-primary) 0%, #ff8c42 100%);
      color: var(--bg-dark);
      box-shadow: 0 4px 15px var(--accent-glow);
    }

    .btn-game.secondary {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text-primary);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn-game.live {
      background: linear-gradient(135deg, var(--live-red) 0%, #ff6b81 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3);
      animation: btnPulse 2s ease-in-out infinite;
    }

    @keyframes btnPulse {
      0%, 100% { box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3); }
      50% { box-shadow: 0 4px 25px rgba(255, 71, 87, 0.5); }
    }

    /* Card de jogo AO VIVO - super destaque */
    .game-card.is-live {
      border: 2px solid rgba(255, 71, 87, 0.4);
      box-shadow: 0 0 25px rgba(255, 71, 87, 0.15);
    }

    .game-card.is-live .game-card-header {
      background: linear-gradient(135deg, rgba(255, 71, 87, 0.15), rgba(255, 71, 87, 0.05));
    }

    /* Card quando Ã© o time do coraÃ§Ã£o */
    .game-card.my-team-playing {
      border-color: rgba(255, 159, 67, 0.4);
    }

    .game-card.my-team-playing::before {
      content: 'ğŸ’› SEU TIME';
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 3px 8px;
      background: var(--accent-primary);
      color: var(--bg-dark);
      font-size: 0.55em;
      font-weight: 700;
      border-radius: 8px;
      z-index: 2;
    }

    /* Indicador "arraste para ver mais" */
    .scroll-hint {
      display: none;
      align-items: center;
      gap: 6px;
      font-size: 0.75em;
      color: #a9b5c6;
      margin-left: auto;
    }

    .scroll-hint .arrow {
      display: inline-block;
      animation: scrollArrow 1.5s ease-in-out infinite;
    }

    @keyframes scrollArrow {
      0%, 100% { transform: translateX(0); opacity: 0.5; }
      50% { transform: translateX(5px); opacity: 1; }
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .game-teams {
      flex: 1;
    }

    .team-name {
      font-weight: 600;
      font-size: 1.1em;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Camiseta mini */
    .jersey-mini {
      width: 24px;
      height: 28px;
      display: inline-block;
      vertical-align: middle;
    }

    .vs {
      color: #a9b5c6;
      font-size: 0.85em;
      margin: 5px 0;
    }

    .game-status {
      padding: 6px 14px;
      border-radius: 50px;
      font-size: 0.7em;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .status-live {
      background: linear-gradient(135deg, var(--live-red) 0%, #ff6b81 100%);
      animation: pulse-live 2s ease-in-out infinite;
      box-shadow: 0 0 20px rgba(255, 71, 87, 0.5);
    }

    .status-live::before {
      content: '';
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      animation: blink 1s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    @keyframes pulse-live {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    .game-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    .info-item {
      text-align: center;
    }

    .info-label {
      font-size: 0.75em;
      color: #a9b5c6;
      margin-bottom: 3px;
    }

    .info-value {
      font-weight: 600;
      color: #e7eef7;
    }

    /* TORCIDA */
    .torcida {
      margin-bottom: 15px;
    }

    .torcida-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.85em;
    }

    .torcida-bar {
      height: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 50px;
      overflow: hidden;
      display: flex;
      width: 100%;
    }

    .torcida-fill-a {
      transition: width 0.5s ease;
      flex-shrink: 0;
      height: 100%;
    }

    .torcida-fill-b {
      transition: width 0.5s ease;
      flex-shrink: 0;
      height: 100%;
    }

    /* BADGE DE TIME ESCOLHIDO */
    .team-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 8px 15px;
      background: linear-gradient(135deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.2));
      border: 2px solid #2ecc71;
      border-radius: 50px;
      font-size: 0.85em;
      font-weight: 600;
      color: #2ecc71;
      margin-bottom: 15px;
    }

    /* BOTÃ•ES DE AÃ‡ÃƒO */
    .game-actions {
      display: flex;
      gap: 10px;
    }

    .btn-action {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
      font-size: 0.95em;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent-primary) 0%, #ff8c42 100%);
      color: var(--bg-dark);
      box-shadow: 0 4px 15px var(--accent-glow);
      font-weight: 700;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px var(--accent-glow);
    }

    .btn-primary:active {
      transform: scale(0.97);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.25);
    }

    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }

    .btn-secondary:active {
      transform: scale(0.97);
    }

    /* ==================== MODAL DE ESCOLHA ==================== */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: linear-gradient(135deg, #1e2936 0%, #18222e 100%);
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      text-align: center;
      margin-bottom: 25px;
    }

    .modal-header h2 {
      font-size: 1.5em;
      margin-bottom: 10px;
    }

    .modal-header p {
      color: #a9b5c6;
    }

    .team-options {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .team-option {
      flex: 1;
      padding: 20px;
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .team-option:hover {
      border-color: #ffb547;
      background: rgba(255, 181, 71, 0.1);
    }

    .team-option .jersey-modal {
      width: 60px;
      height: 70px;
      margin: 0 auto 15px;
    }

    .team-option .team-name-modal {
      font-weight: 600;
      font-size: 1.1em;
    }

    .modal-warning {
      text-align: center;
      padding: 15px;
      background: rgba(231, 76, 60, 0.1);
      border: 1px solid rgba(231, 76, 60, 0.3);
      border-radius: 10px;
      margin-bottom: 20px;
      color: #e74c3c;
      font-size: 0.9em;
    }

    .modal-actions {
      display: flex;
      justify-content: center;
    }

    .btn-cancel {
      padding: 12px 30px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      color: #a9b5c6;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
    }

    .btn-cancel:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* EMPTY STATE */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #a9b5c6;
    }

    .empty-icon {
      font-size: 4em;
      margin-bottom: 20px;
    }

    /* TOAST */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 15px 30px;
      border-radius: 50px;
      font-weight: 600;
      z-index: 2000;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    /* BOTTOM NAV */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(14, 20, 27, 0.98);
      backdrop-filter: blur(20px);
      padding: 10px 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 99;
    }

    .nav-content {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      justify-content: space-around;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      color: #a9b5c6;
      text-decoration: none;
      font-size: 0.75em;
      transition: all 0.3s ease;
      padding: 5px 10px;
    }

    .nav-item:hover, .nav-item.active {
      color: #ffb547;
    }

    .nav-icon {
      font-size: 1.5em;
    }

    /* ==================== QUIZ DIÃRIO DO TIME DO CORAÃ‡ÃƒO ==================== */
    .quiz-diario-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(8px);
    }

    .quiz-diario-overlay.active {
      display: flex;
    }

    .quiz-diario-card {
      background: linear-gradient(135deg, #1e2936 0%, #18222e 100%);
      border-radius: 24px;
      padding: 0;
      max-width: 480px;
      width: 92%;
      border: 1px solid rgba(255, 181, 71, 0.3);
      animation: quizSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 181, 71, 0.1);
    }

    @keyframes quizSlideIn {
      from {
        opacity: 0;
        transform: translateY(60px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .quiz-diario-banner {
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      padding: 20px 25px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .quiz-diario-banner::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 60%);
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%, 100% { transform: translateX(-30%) translateY(-30%); }
      50% { transform: translateX(30%) translateY(30%); }
    }

    .quiz-diario-banner h2 {
      color: #0e141b;
      font-size: 1.3em;
      font-weight: 800;
      position: relative;
      z-index: 1;
    }

    .quiz-diario-banner p {
      color: rgba(14, 20, 27, 0.7);
      font-size: 0.85em;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .quiz-diario-body {
      padding: 25px;
    }

    /* Step: Convite */
    .quiz-step-convite {
      text-align: center;
    }

    .quiz-step-convite .quiz-team-info {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 15px 0 20px;
      padding: 12px 20px;
      background: rgba(255, 181, 71, 0.1);
      border: 1px solid rgba(255, 181, 71, 0.2);
      border-radius: 12px;
    }

    .quiz-step-convite .quiz-team-info .jersey-quiz {
      width: 40px;
      height: 48px;
    }

    .quiz-step-convite .quiz-team-name {
      font-weight: 700;
      font-size: 1.1em;
      color: #ffb547;
    }

    .quiz-step-convite p {
      color: #a9b5c6;
      font-size: 0.9em;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .quiz-convite-btns {
      display: flex;
      gap: 12px;
    }

    .quiz-convite-btns button {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 0.95em;
      transition: all 0.3s ease;
    }

    .btn-quiz-sim {
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      color: #0e141b;
      box-shadow: 0 4px 15px rgba(255, 181, 71, 0.3);
    }

    .btn-quiz-sim:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 181, 71, 0.5);
    }

    .btn-quiz-nao {
      background: rgba(255, 255, 255, 0.08);
      color: #a9b5c6;
      border: 1px solid rgba(255, 255, 255, 0.15) !important;
    }

    .btn-quiz-nao:hover {
      background: rgba(255, 255, 255, 0.15);
      color: #e7eef7;
    }

    /* Step: Pergunta */
    .quiz-step-pergunta {
      display: none;
    }

    .quiz-pergunta-texto {
      font-size: 1.05em;
      font-weight: 600;
      color: #e7eef7;
      line-height: 1.5;
      margin-bottom: 20px;
      text-align: center;
    }

    .quiz-xp-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 12px;
      background: rgba(255, 181, 71, 0.15);
      border: 1px solid rgba(255, 181, 71, 0.3);
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      color: #ffb547;
      margin-bottom: 15px;
    }

    .quiz-alternativas {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .quiz-alt-btn {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: rgba(0, 0, 0, 0.25);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      font-family: 'Poppins', sans-serif;
      color: #e7eef7;
      font-size: 0.9em;
      width: 100%;
    }

    .quiz-alt-btn:hover:not(.disabled) {
      border-color: rgba(255, 181, 71, 0.5);
      background: rgba(255, 181, 71, 0.08);
      transform: translateX(4px);
    }

    .quiz-alt-btn .alt-letra {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.85em;
      flex-shrink: 0;
      transition: all 0.3s ease;
    }

    .quiz-alt-btn.correta {
      border-color: #2ecc71 !important;
      background: rgba(46, 204, 113, 0.15) !important;
      animation: pulseCorrect 0.5s ease;
    }

    .quiz-alt-btn.correta .alt-letra {
      background: #2ecc71;
      color: #fff;
    }

    .quiz-alt-btn.errada {
      border-color: #e74c3c !important;
      background: rgba(231, 76, 60, 0.15) !important;
      animation: shakeWrong 0.5s ease;
    }

    .quiz-alt-btn.errada .alt-letra {
      background: #e74c3c;
      color: #fff;
    }

    .quiz-alt-btn.disabled {
      cursor: default;
      opacity: 0.5;
    }

    .quiz-alt-btn.disabled:not(.correta):not(.errada) {
      opacity: 0.35;
    }

    @keyframes pulseCorrect {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }

    @keyframes shakeWrong {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    /* Step: Resultado */
    .quiz-step-resultado {
      display: none;
      text-align: center;
    }

    .quiz-resultado-icon {
      font-size: 4em;
      margin-bottom: 10px;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes bounceIn {
      from { transform: scale(0); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .quiz-resultado-titulo {
      font-size: 1.4em;
      font-weight: 800;
      margin-bottom: 8px;
    }

    .quiz-resultado-titulo.acertou {
      color: #2ecc71;
    }

    .quiz-resultado-titulo.errou {
      color: #e74c3c;
    }

    .quiz-resultado-msg {
      color: #a9b5c6;
      font-size: 0.9em;
      line-height: 1.5;
      margin-bottom: 15px;
    }

    .quiz-xp-ganho {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 24px;
      background: linear-gradient(135deg, rgba(255, 181, 71, 0.2), rgba(255, 140, 66, 0.1));
      border: 2px solid rgba(255, 181, 71, 0.4);
      border-radius: 50px;
      font-weight: 800;
      font-size: 1.2em;
      color: #ffb547;
      margin-bottom: 20px;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
    }

    .btn-quiz-fechar {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 0.95em;
      background: linear-gradient(135deg, #ffb547 0%, #ff8c42 100%);
      color: #0e141b;
      transition: all 0.3s ease;
    }

    .btn-quiz-fechar:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 181, 71, 0.5);
    }

    /* ==================== FIM QUIZ DIÃRIO ==================== */

    /* ==================== BANNER INSTAGRAM (INLINE) ==================== */
    .instagram-banner {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px 24px;
      margin: 30px 0 10px;
      background: linear-gradient(135deg, rgba(240, 148, 51, 0.1) 0%, rgba(225, 48, 108, 0.1) 50%, rgba(188, 24, 136, 0.1) 100%);
      border: 1px solid rgba(225, 48, 108, 0.25);
      border-radius: 14px;
      text-decoration: none;
      color: #e7eef7;
      transition: all 0.3s ease;
    }

    .instagram-banner:hover {
      border-color: rgba(225, 48, 108, 0.5);
      background: linear-gradient(135deg, rgba(240, 148, 51, 0.15) 0%, rgba(225, 48, 108, 0.15) 50%, rgba(188, 24, 136, 0.15) 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(225, 48, 108, 0.2);
    }

    .instagram-banner .insta-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .instagram-banner .insta-icon svg {
      width: 18px;
      height: 18px;
      fill: white;
    }

    .instagram-banner .insta-text {
      font-size: 0.9em;
      font-weight: 600;
    }

    .instagram-banner .insta-text span {
      color: #a9b5c6;
      font-weight: 400;
      font-size: 0.85em;
    }

    /* RESPONSIVO */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: row;
        gap: 10px;
      }

      .user-menu {
        gap: 8px;
      }

      .user-name {
        display: none;
      }

      .btn-logout {
        padding: 6px 12px;
        font-size: 0.85em;
      }

      .container {
        padding: 16px 12px;
      }

      .user-profile {
        padding: 18px 14px;
      }

      .game-card {
        min-width: 270px;
        max-width: 290px;
      }

      /* CrÃ©ditos em disputa mobile */
      .creditos-disputa {
        padding: 8px 12px;
        margin: 0 12px 10px;
      }

      .creditos-valor {
        font-size: 1.1em;
      }

      .creditos-label {
        font-size: 0.7em;
      }

      .team-options {
        flex-direction: column;
      }

      .user-stats {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
      }

      .stat-card {
        padding: 12px 6px;
      }

      .stat-value {
        font-size: 1.2em;
      }

      .stat-label {
        font-size: 0.65em;
      }

      .quick-action-bar {
        flex-wrap: wrap;
      }

      .quick-action-btn {
        width: 100%;
        margin-top: 10px;
      }

      /* Carrossel no mobile */
      .tips-carousel {
        height: 130px;
        border-radius: 14px;
      }

      .tips-slide {
        padding: 16px;
      }

      .tips-icon {
        font-size: 2.2em;
      }

      .tips-title {
        font-size: 1em;
      }

      .tips-desc {
        font-size: 0.75em;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .tips-badge {
        padding: 5px 10px;
        font-size: 0.7em;
      }

      .community-bar {
        gap: 16px;
      }

      .community-stat {
        font-size: 0.75em;
      }

      .streak-mini {
        padding: 12px 14px;
      }

      .streak-count {
        font-size: 1em;
      }

      .modes-grid {
        gap: 10px !important;
      }

      .mode-card {
        padding: 16px !important;
      }

      .mode-card > div:first-child {
        font-size: 2em !important;
      }
    }

    @media (max-width: 380px) {
      .user-stats {
        grid-template-columns: repeat(2, 1fr);
      }

      .stat-value {
        font-size: 1.4em;
      }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <div class="logo">âš½ Yellup</div>
      <div class="user-menu">
        <a href="notificacoes.html" class="btn-notif" id="btnNotif" style="
          position: relative;
          padding: 8px;
          margin-right: 10px;
          font-size: 1.3em;
          text-decoration: none;
        ">
          ğŸ””
          <span id="notifBadge" style="
            position: absolute;
            top: 0;
            right: 0;
            background: #ef4444;
            color: #fff;
            font-size: 0.5em;
            padding: 2px 5px;
            border-radius: 10px;
            display: none;
          ">0</span>
        </a>
        <div class="user-avatar" id="userAvatar">U</div>
        <span class="user-name" id="userName">UsuÃ¡rio</span>
        <button class="btn-logout" onclick="logout()">Sair</button>
      </div>
    </div>
  </header>

  <!-- CONTAINER PRINCIPAL -->
  <div class="container">
    
    <!-- PERFIL DO USUÃRIO -->
    <div class="user-profile" id="userProfileCard">
      <!-- Slideshow de Fundo Personalizado -->
      <div class="profile-bg-slideshow" id="profileBgSlideshow">
        <div class="profile-bg-slide active" id="bgSlide1"></div>
        <div class="profile-bg-slide" id="bgSlide2"></div>
        <div class="profile-bg-slide" id="bgSlide3"></div>
        <div class="profile-bg-overlay"></div>
      </div>
      
      <div class="profile-header">
        <div class="profile-avatar" id="profileAvatar">U</div>
        <div class="profile-info">
          <h2 id="profileName">UsuÃ¡rio</h2>
          <div id="profileLevel"></div>
          <div class="profile-team">
            <span id="profileTeamJersey"></span>
            <span id="profileTeam">Carregando...</span>
          </div>
        </div>
      </div>
      <div id="levelProgress" style="margin-bottom: 20px;"></div>
      <div class="user-stats">
        <div class="stat-card">
          <div class="stat-value" id="statCredits">0</div>
          <div class="stat-label">ğŸ’ CrÃ©ditos</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statXP">0</div>
          <div class="stat-label">â­ XP</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statGames">0</div>
          <div class="stat-label">ğŸ® Jogos</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statFree">5</div>
          <div class="stat-label">ğŸ GrÃ¡tis</div>
        </div>
      </div>
    </div>

    <!-- BARRA DE AÃ‡ÃƒO RÃPIDA - O que fazer agora -->
    <div class="quick-action-bar" id="quickActionBar" style="display: none;">
      <div class="quick-action-icon" id="quickActionIcon">ğŸ¯</div>
      <div class="quick-action-content">
        <div class="quick-action-title" id="quickActionTitle">Tem jogo ao vivo!</div>
        <div class="quick-action-desc" id="quickActionDesc">Seu time estÃ¡ jogando agora</div>
      </div>
      <button class="quick-action-btn" id="quickActionBtn" onclick="executarAcaoRapida()">Participar</button>
    </div>

    <!-- CARROSSEL DE DICAS / STORIES -->
    <div class="tips-carousel" id="tipsCarousel">
      <div class="tips-progress" id="tipsProgress"></div>
      
      <!-- Slide 1: TorÃ§a ao vivo -->
      <div class="tips-slide active" style="background-image: url('https://images.unsplash.com/photo-1489944440615-453fc2b6a9a9?w=800&q=80');" onclick="window.location.href='#sectionLive'">
        <div class="tips-slide-content">
          <div class="tips-icon">ğŸ“£</div>
          <div class="tips-text">
            <div class="tips-title">TorÃ§a em Jogos ao Vivo!</div>
            <div class="tips-desc">Escolha seu time, responda perguntas durante a partida e ganhe XP e crÃ©ditos</div>
          </div>
          <div class="tips-badge">+5 XP</div>
        </div>
      </div>
      
      <!-- Slide 2: Embates PvP -->
      <div class="tips-slide" style="background-image: url('https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800&q=80');" onclick="window.location.href='embates-pvp.html'">
        <div class="tips-slide-content">
          <div class="tips-icon">âš”ï¸</div>
          <div class="tips-text">
            <div class="tips-title">Desafie seus Amigos!</div>
            <div class="tips-desc">Crie embates PvP e prove quem sabe mais de futebol. Vencedor leva crÃ©ditos!</div>
          </div>
          <div class="tips-badge">Ganhe ğŸ’</div>
        </div>
      </div>
      
      <!-- Slide 3: Indique Amigos -->
      <div class="tips-slide" style="background-image: url('https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=800&q=80');" onclick="window.location.href='indicacoes.html'">
        <div class="tips-slide-content">
          <div class="tips-icon">ğŸ</div>
          <div class="tips-text">
            <div class="tips-title">Indique Amigos e Ganhe!</div>
            <div class="tips-desc">Cada amigo que se cadastrar com seu cÃ³digo, vocÃªs dois ganham crÃ©ditos grÃ¡tis!</div>
          </div>
          <div class="tips-badge">+20 ğŸ’</div>
        </div>
      </div>
      
      <!-- Slide 4: Torneios -->
      <div class="tips-slide" style="background-image: url('https://images.unsplash.com/photo-1522778119026-d647f0596c20?w=800&q=80');" onclick="window.location.href='torneios.html'">
        <div class="tips-slide-content">
          <div class="tips-icon">ğŸ†</div>
          <div class="tips-text">
            <div class="tips-title">Participe de Torneios!</div>
            <div class="tips-desc">CompetiÃ§Ãµes semanais com premiaÃ§Ãµes em crÃ©ditos. Mostre que vocÃª Ã© craque!</div>
          </div>
          <div class="tips-badge">PrÃªmios</div>
        </div>
      </div>
      
      <!-- Slide 5: Quiz diÃ¡rio -->
      <div class="tips-slide" style="background-image: url('https://images.unsplash.com/photo-1606925797300-0b35e9d1794e?w=800&q=80');" onclick="verificarQuizDiario()">
        <div class="tips-slide-content">
          <div class="tips-icon">ğŸ§ </div>
          <div class="tips-text">
            <div class="tips-title">Quiz do Seu Time!</div>
            <div class="tips-desc">Todo dia uma pergunta sobre seu time do coraÃ§Ã£o. Acerte e ganhe XP bÃ´nus!</div>
          </div>
          <div class="tips-badge">DiÃ¡rio</div>
        </div>
      </div>
      
      <!-- Indicadores -->
      <div class="tips-indicators">
        <div class="tips-dot active" onclick="goToSlide(0)"></div>
        <div class="tips-dot" onclick="goToSlide(1)"></div>
        <div class="tips-dot" onclick="goToSlide(2)"></div>
        <div class="tips-dot" onclick="goToSlide(3)"></div>
        <div class="tips-dot" onclick="goToSlide(4)"></div>
      </div>
    </div>

    <!-- JOGOS AO VIVO -->
    <section id="sectionLive">
      <div class="section-header">
        <h2 class="section-title">ğŸ”´ Jogos ao Vivo</h2>
        <span class="section-count" id="countLive">0 jogos</span>
        <span class="scroll-hint" id="hintLive"><span class="arrow">â†’</span> arraste</span>
      </div>
      <div class="games-scroll" id="gamesLive">
        <div class="empty-state">
          <div class="empty-icon">âš½</div>
          <p>Carregando jogos...</p>
        </div>
      </div>
    </section>

    <!-- PRÃ“XIMOS JOGOS -->
    <section id="sectionScheduled">
      <div class="section-header">
        <h2 class="section-title">ğŸ“… PrÃ³ximos Jogos</h2>
        <span class="section-count" id="countScheduled">0 jogos</span>
        <span class="scroll-hint" id="hintScheduled"><span class="arrow">â†’</span> arraste</span>
      </div>
      <div class="games-scroll" id="gamesScheduled">
        <div class="empty-state">
          <div class="empty-icon">ğŸ“…</div>
          <p>Carregando jogos...</p>
        </div>
      </div>
    </section>

    <!-- MODOS DE JOGO -->
    <section id="sectionModes">
      <div class="section-header">
        <h2 class="section-title">ğŸ® Modos & Comunidade</h2>
      </div>
      <div class="modes-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px;">
        <a href="teste-ligas.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(147, 51, 234, 0.2), rgba(79, 70, 229, 0.1));
          border: 2px solid rgba(147, 51, 234, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ†</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Teste de Ligas</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Treine grÃ¡tis!</div>
        </a>
        <a href="embates-pvp.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1));
          border: 2px solid rgba(239, 68, 68, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">âš”ï¸</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Embates PvP</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Desafie amigos!</div>
        </a>
        <a href="torneios.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(255, 181, 71, 0.2), rgba(255, 140, 66, 0.1));
          border: 2px solid rgba(255, 181, 71, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ…</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Torneios</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Ganhe prÃªmios!</div>
        </a>
        <a href="ranking-geral.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1));
          border: 2px solid rgba(16, 185, 129, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ“Š</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Ranking</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Veja sua posiÃ§Ã£o!</div>
        </a>
        <a href="amigos.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.1));
          border: 2px solid rgba(59, 130, 246, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ‘¥</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Amigos</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Conecte-se!</div>
        </a>
        <a href="chat.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(219, 39, 119, 0.1));
          border: 2px solid rgba(236, 72, 153, 0.4);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ’¬</div>
          <div style="font-weight: 700; margin-bottom: 5px;">Chat</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Converse agora!</div>
        </a>
        <a href="bolsa.html" class="mode-card" style="
          background: linear-gradient(135deg, rgba(255, 181, 71, 0.25), rgba(255, 140, 66, 0.15));
          border: 2px solid rgba(255, 181, 71, 0.5);
          border-radius: 16px;
          padding: 20px;
          text-align: center;
          text-decoration: none;
          color: #e7eef7;
          transition: all 0.3s ease;
          box-shadow: 0 0 20px rgba(255, 181, 71, 0.15);
        ">
          <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ“ˆ</div>
          <div style="font-weight: 700; margin-bottom: 5px; color: #ffb547;">Bolsa de Times</div>
          <div style="font-size: 0.8em; color: #a9b5c6;">Compre e venda cotas!</div>
        </a>
      </div>
    </section>

    <!-- JOGOS ENCERRADOS (Ãºltimos 10) -->
    <section id="sectionFinished">
      <div class="section-header">
        <h2 class="section-title">âœ… Jogos Encerrados</h2>
        <span class="section-count" id="countFinished">0 jogos</span>
        <span class="scroll-hint" id="hintFinished"><span class="arrow">â†’</span> arraste</span>
      </div>
      <div class="games-scroll" id="gamesFinished">
        <div class="empty-state">
          <div class="empty-icon">âœ…</div>
          <p>Carregando jogos...</p>
        </div>
      </div>
    </section>

    <!-- INSTAGRAM BANNER -->
    <a href="https://www.instagram.com/yellup.app?igsh=MTNxNTZ0cjRzajdkcw==" target="_blank" rel="noopener noreferrer" class="instagram-banner">
      <div class="insta-icon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
        </svg>
      </div>
      <div class="insta-text">
        Siga @yellup.app<br>
        <span>Novidades, dicas e promoÃ§Ãµes!</span>
      </div>
    </a>

  </div>

  <!-- MODAL QUIZ DIÃRIO DO TIME DO CORAÃ‡ÃƒO -->
  <div class="quiz-diario-overlay" id="quizDiarioOverlay">
    <div class="quiz-diario-card">
      <div class="quiz-diario-banner">
        <h2>âš½ Quiz DiÃ¡rio do CoraÃ§Ã£o</h2>
        <p>Teste seu conhecimento sobre seu time!</p>
      </div>
      <div class="quiz-diario-body">

        <!-- STEP 1: Convite -->
        <div class="quiz-step-convite" id="quizStepConvite">
          <div class="quiz-team-info">
            <span class="jersey-quiz" id="quizTeamJersey"></span>
            <span class="quiz-team-name" id="quizTeamName">Seu Time</span>
          </div>
          <p>Que tal responder <strong>uma pergunta</strong> sobre seu time do coraÃ§Ã£o e ganhar <strong>XP</strong>? ğŸ¯</p>
          <div class="quiz-convite-btns">
            <button class="btn-quiz-nao" onclick="fecharQuizDiario()">Agora nÃ£o</button>
            <button class="btn-quiz-sim" onclick="iniciarQuizDiario()">ğŸ® Bora!</button>
          </div>
        </div>

        <!-- STEP 2: Pergunta -->
        <div class="quiz-step-pergunta" id="quizStepPergunta">
          <div class="quiz-xp-badge" id="quizXpBadge">â­ Vale 5 XP</div>
          <div class="quiz-pergunta-texto" id="quizPerguntaTexto"></div>
          <div class="quiz-alternativas" id="quizAlternativas"></div>
        </div>

        <!-- STEP 3: Resultado -->
        <div class="quiz-step-resultado" id="quizStepResultado">
          <div class="quiz-resultado-icon" id="quizResultIcon"></div>
          <div class="quiz-resultado-titulo" id="quizResultTitulo"></div>
          <div class="quiz-resultado-msg" id="quizResultMsg"></div>
          <div class="quiz-xp-ganho" id="quizXpGanho"></div>
          <button class="btn-quiz-fechar" onclick="fecharQuizDiario()">ğŸ‘ Continuar</button>
        </div>

      </div>
    </div>
  </div>

  <!-- MODAL DE ESCOLHA DE TIME -->
  <div class="modal-overlay" id="modalEscolha">
    <div class="modal-content">
      <div class="modal-header">
        <h2>âš½ Escolha seu Time</h2>
        <p>Para qual time vocÃª vai torcer nesta partida?</p>
      </div>
      
      <div class="team-options">
        <div class="team-option" id="optionTeamA" onclick="confirmarEscolha('A')">
          <div class="jersey-modal" id="jerseyModalA"></div>
          <div class="team-name-modal" id="teamNameModalA">Time A</div>
        </div>
        <div class="team-option" id="optionTeamB" onclick="confirmarEscolha('B')">
          <div class="jersey-modal" id="jerseyModalB"></div>
          <div class="team-name-modal" id="teamNameModalB">Time B</div>
        </div>
      </div>

      <div class="modal-warning">
        âš ï¸ AtenÃ§Ã£o: VocÃª nÃ£o poderÃ¡ mudar de time apÃ³s a escolha!
      </div>

      <div class="modal-actions">
        <button class="btn-cancel" onclick="fecharModal()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- BOTTOM NAV -->
  <nav class="bottom-nav">
    <div class="nav-content">
      <a href="painel.html" class="nav-item active">
        <span class="nav-icon">ğŸ </span>
        <span>InÃ­cio</span>
      </a>
      <a href="ranking-geral.html" class="nav-item">
        <span class="nav-icon">ğŸ†</span>
        <span>Ranking</span>
      </a>
      <a href="indicacoes.html" class="nav-item">
        <span class="nav-icon">ğŸ”—</span>
        <span>Indicar</span>
      </a>
      <a href="editar-perfil.html" class="nav-item">
        <span class="nav-icon">ğŸ‘¤</span>
        <span>Perfil</span>
      </a>
    </div>
  </nav>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

  <!-- FIREBASE -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  
  <!-- UtilitÃ¡rio de Bandeiras -->
  <script src="js/bandeiras-utils.js"></script>
  
  <script>
    // ===================================
    // ğŸ”¥ CONFIGURAÃ‡ÃƒO FIREBASE
    // ===================================
    const firebaseConfig = {
      apiKey: "AIzaSyC5ZrkEy7KuCFJOtPvI7-P-JcA0MF4im5c",
      authDomain: "painel-yellup.firebaseapp.com",
      projectId: "painel-yellup",
      storageBucket: "painel-yellup.appspot.com",
      messagingSenderId: "608347210297",
      appId: "1:608347210297:web:75092713724e617c7203e8",
      measurementId: "G-SYZ16X31KQ"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // ===================================
    // ğŸ“¦ VARIÃVEIS GLOBAIS
    // ===================================
    let currentUserId = null;
    let currentUserData = null;
    let jogoAtual = null;  // Jogo sendo selecionado no modal

    // ===================================
    // ğŸ–ï¸ SISTEMA DE NÃVEIS
    // ===================================
    const NIVEIS = [
      { nome: 'Bronze', minXP: 0, classe: 'level-bronze', emoji: 'ğŸ¥‰', cor: '#CD7F32' },
      { nome: 'Prata', minXP: 500, classe: 'level-prata', emoji: 'ğŸ¥ˆ', cor: '#C0C0C0' },
      { nome: 'Ouro', minXP: 2000, classe: 'level-ouro', emoji: 'ğŸ¥‡', cor: '#FFD700' },
      { nome: 'Diamante', minXP: 5000, classe: 'level-diamante', emoji: 'ğŸ’', cor: '#B9F2FF' },
      { nome: 'Mestre', minXP: 10000, classe: 'level-mestre', emoji: 'ğŸ‘‘', cor: '#9B59B6' }
    ];

    function calcularNivel(xp) {
      let nivel = NIVEIS[0];
      for (const n of NIVEIS) {
        if (xp >= n.minXP) nivel = n;
      }
      return nivel;
    }

    function calcularProximoNivel(xp) {
      for (const n of NIVEIS) {
        if (xp < n.minXP) return n;
      }
      return null; // JÃ¡ Ã© mestre
    }

    function calcularProgressoNivel(xp) {
      const nivelAtual = calcularNivel(xp);
      const proximoNivel = calcularProximoNivel(xp);
      
      if (!proximoNivel) return 100; // Mestre
      
      const xpNoNivelAtual = xp - nivelAtual.minXP;
      const xpParaProximo = proximoNivel.minXP - nivelAtual.minXP;
      
      return Math.round((xpNoNivelAtual / xpParaProximo) * 100);
    }

    // ===================================
    // ğŸ‘• FUNÃ‡ÃƒO PARA GERAR CAMISETA SVG
    // ===================================
    function gerarCamisetaSVG(corPrimaria, corSecundaria, corTerciaria) {
      corPrimaria = corPrimaria || '#28a745';
      corSecundaria = corSecundaria || '#ffffff';
      corTerciaria = corTerciaria || corPrimaria;
      
      return `
        <svg viewBox="0 0 100 120" xmlns="http://www.w3.org/2000/svg">
          <path d="M25,35 L25,110 L75,110 L75,35 L60,35 L60,25 C60,20 55,15 50,15 C45,15 40,20 40,25 L40,35 Z" 
                fill="${corPrimaria}" stroke="${corSecundaria}" stroke-width="2"/>
          <path d="M25,35 L5,50 L5,70 L25,60 Z" 
                fill="${corPrimaria}" stroke="${corSecundaria}" stroke-width="2"/>
          <path d="M75,35 L95,50 L95,70 L75,60 Z" 
                fill="${corPrimaria}" stroke="${corSecundaria}" stroke-width="2"/>
          <path d="M5,50 L15,55 L15,65 L5,70 Z" fill="${corTerciaria}"/>
          <path d="M95,50 L85,55 L85,65 L95,70 Z" fill="${corTerciaria}"/>
          <ellipse cx="50" cy="22" rx="12" ry="8" fill="${corSecundaria}"/>
          <ellipse cx="50" cy="22" rx="8" ry="5" fill="${corPrimaria}"/>
        </svg>
      `;
    }

    // ===================================
    // ğŸ’¬ TOAST
    // ===================================
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ===================================
    // ğŸ” AUTENTICAÃ‡ÃƒO
    // ===================================
    auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
      .then(() => console.log("âœ… PersistÃªncia configurada"))
      .catch((error) => console.error("âŒ Erro:", error));

    auth.onAuthStateChanged(async (user) => {
      console.log("ğŸ” Verificando autenticaÃ§Ã£o...");
      
      if (!user) {
        console.log("âŒ UsuÃ¡rio nÃ£o autenticado");
        window.location.href = 'index.html';
        return;
      }

      console.log("âœ… UsuÃ¡rio autenticado:", user.uid);
      currentUserId = user.uid;

      try {
        // Carregar dados do usuÃ¡rio
        const userDoc = await db.collection('usuarios').doc(currentUserId).get();
        
        if (!userDoc.exists) {
          console.error("âŒ UsuÃ¡rio nÃ£o encontrado no banco!");
          showToast('âŒ Erro: UsuÃ¡rio nÃ£o encontrado');
          return;
        }

        currentUserData = userDoc.data();
        console.log("âœ… Dados do usuÃ¡rio:", currentUserData);

        // Atualizar interface
        await atualizarPerfil();
        await carregarJogos();

        // âš½ QUIZ DIÃRIO - Verificar se deve mostrar
        await verificarQuizDiario();

      } catch (error) {
        console.error("âŒ Erro:", error);
        showToast('âŒ Erro ao carregar dados');
      }
    });

    // ===================================
    // ğŸ‘¤ ATUALIZAR PERFIL
    // ===================================
    async function atualizarPerfil() {
      const nome = currentUserData.usuarioUnico || currentUserData.usuario || currentUserData.nome || 'UsuÃ¡rio';
      const inicial = nome.charAt(0).toUpperCase();
      const xp = currentUserData.xp || 0;

      document.getElementById('userName').textContent = nome;
      document.getElementById('profileName').textContent = nome;
      
      // Avatar - mostrar foto se existir
      const userAvatarEl = document.getElementById('userAvatar');
      const profileAvatarEl = document.getElementById('profileAvatar');
      
      if (currentUserData.avatarUrl) {
        const imgStyle = 'width:100%;height:100%;object-fit:cover;border-radius:50%;';
        userAvatarEl.innerHTML = `<img src="${currentUserData.avatarUrl}" alt="Avatar" style="${imgStyle}">`;
        profileAvatarEl.innerHTML = `<img src="${currentUserData.avatarUrl}" alt="Avatar" style="${imgStyle}">`;
      } else {
        userAvatarEl.textContent = inicial;
        profileAvatarEl.textContent = inicial;
      }

      // Calcular nÃ­vel
      const nivel = calcularNivel(xp);
      const proximoNivel = calcularProximoNivel(xp);
      const progresso = calcularProgressoNivel(xp);

      // Atualizar badge de nÃ­vel
      const nivelBadge = document.getElementById('profileLevel');
      if (nivelBadge) {
        nivelBadge.innerHTML = `
          <span class="level-badge" style="background: ${nivel.cor}20; color: ${nivel.cor}; border: 1px solid ${nivel.cor}50;">
            ${nivel.emoji} ${nivel.nome}
          </span>
        `;
      }

      // Barra de progresso do nÃ­vel
      const progressBar = document.getElementById('levelProgress');
      if (progressBar && proximoNivel) {
        progressBar.innerHTML = `
          <div style="font-size: 0.8em; color: #a9b5c6; margin-bottom: 5px;">
            ${xp} / ${proximoNivel.minXP} XP para ${proximoNivel.emoji} ${proximoNivel.nome}
          </div>
          <div style="height: 6px; background: rgba(0,0,0,0.3); border-radius: 3px; overflow: hidden;">
            <div style="width: ${progresso}%; height: 100%; background: linear-gradient(90deg, ${nivel.cor}, ${proximoNivel.cor}); border-radius: 3px;"></div>
          </div>
        `;
      } else if (progressBar) {
        progressBar.innerHTML = `
          <div style="font-size: 0.8em; color: #9B59B6;">
            ğŸ‘‘ NÃ­vel mÃ¡ximo atingido!
          </div>
        `;
      }

      // EstatÃ­sticas
      document.getElementById('statCredits').textContent = currentUserData.creditos || 0;
      document.getElementById('statXP').textContent = xp;
      
      const jogosParticipados = currentUserData.torcidas ? Object.keys(currentUserData.torcidas).length : 0;
      document.getElementById('statGames').textContent = jogosParticipados;

      const jogadasGratis = 5 - (currentUserData.jogadasGratis?.usadas || 0);
      document.getElementById('statFree').textContent = Math.max(0, jogadasGratis);

      // Time do coraÃ§Ã£o
      if (currentUserData.timeId) {
        try {
          const timeDoc = await db.collection('times').doc(currentUserData.timeId).get();
          if (timeDoc.exists) {
            const time = { id: timeDoc.id, ...timeDoc.data() };
            const bandeira = getBandeira(time.codigoPais);
            document.getElementById('profileTeam').textContent = `â¤ï¸ ${bandeira} ${time.nome}`;
            document.getElementById('profileTeamJersey').innerHTML = gerarCamisetaSVG(
              time.primaria, time.secundaria, time.terciaria
            ).replace('viewBox="0 0 100 120"', 'viewBox="0 0 100 120" width="30" height="35"');
          }
        } catch (e) {
          console.error("Erro ao buscar time:", e);
        }
      }
    }

    // ===================================
    // ğŸ® CARREGAR JOGOS
    // ===================================
    async function carregarJogos() {
      try {
        console.log("ğŸ® Carregando jogos...");

        const jogosSnap = await db.collection('jogos').orderBy('dataInicio', 'desc').get();
        
        const jogosLive = [];
        const jogosScheduled = [];
        const jogosFinished = [];
        const now = new Date();

        for (const doc of jogosSnap.docs) {
          const jogo = { id: doc.id, ...doc.data() };
          
          // Determinar status
          const inicio = jogo.dataInicio?.toDate ? jogo.dataInicio.toDate() : new Date(jogo.dataInicio);
          const fim = jogo.dataFim?.toDate ? jogo.dataFim.toDate() : null;

          // Guardar datas parseadas para ordenaÃ§Ã£o
          jogo._inicio = inicio;
          jogo._fim = fim;

          if (jogo.status === 'finalizado' || (fim && fim < now)) {
            jogo.statusCalc = 'ENCERRADO';
            jogosFinished.push(jogo);
          } else if (jogo.status === 'ao_vivo' || (inicio <= now && (!fim || fim > now))) {
            jogo.statusCalc = 'LIVE';
            jogosLive.push(jogo);
          } else {
            jogo.statusCalc = 'AGENDADO';
            jogosScheduled.push(jogo);
          }
        }

        // ====== ORDENAÃ‡ÃƒO ======
        // Live: comeÃ§aram antes primeiro (ASC por dataInicio)
        jogosLive.sort((a, b) => a._inicio - b._inicio);

        // PrÃ³ximos: vÃ£o comeÃ§ar antes primeiro (ASC por dataInicio)
        jogosScheduled.sort((a, b) => a._inicio - b._inicio);

        // Encerrados: acabaram por Ãºltimo primeiro (DESC por dataFim ou dataInicio)
        jogosFinished.sort((a, b) => {
          const fimA = a._fim || a._inicio;
          const fimB = b._fim || b._inicio;
          return fimB - fimA;
        });

        // Limitar encerrados aos Ãºltimos 10
        const jogosFinishedLimitado = jogosFinished.slice(0, 10);

        console.log(`ğŸ“Š Live: ${jogosLive.length}, Agendados: ${jogosScheduled.length}, Encerrados: ${jogosFinished.length} (mostrando ${jogosFinishedLimitado.length})`);

        // Renderizar
        await renderizarJogos('gamesLive', jogosLive, 'countLive');
        await renderizarJogos('gamesScheduled', jogosScheduled, 'countScheduled');
        await renderizarJogos('gamesFinished', jogosFinishedLimitado, 'countFinished');

        // Mostrar dica de scroll se tiver mais de 1 card
        if (jogosLive.length > 1) document.getElementById('hintLive').style.display = 'flex';
        if (jogosScheduled.length > 1) document.getElementById('hintScheduled').style.display = 'flex';
        if (jogosFinishedLimitado.length > 1) document.getElementById('hintFinished').style.display = 'flex';

      } catch (error) {
        console.error("âŒ Erro ao carregar jogos:", error);
        showToast('âŒ Erro ao carregar jogos');
      }
    }

    // ===================================
    // ğŸ“‹ RENDERIZAR JOGOS
    // ===================================
    async function renderizarJogos(containerId, jogos, countId) {
      const container = document.getElementById(containerId);
      const count = document.getElementById(countId);

      if (jogos.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">âš½</div>
            <p>Nenhum jogo encontrado</p>
          </div>
        `;
        count.textContent = '0 jogos';
        return;
      }

      count.textContent = `${jogos.length} ${jogos.length === 1 ? 'jogo' : 'jogos'}`;

      // Processar jogos com informaÃ§Ãµes dos times
      const jogosProcessados = await Promise.all(jogos.map(async jogo => {
        // Buscar dados dos times
        let timeCasaData = { nome: 'Time A', primaria: '#28a745', secundaria: '#fff', terciaria: '#28a745' };
        let timeForaData = { nome: 'Time B', primaria: '#dc3545', secundaria: '#fff', terciaria: '#dc3545' };

        try {
          if (jogo.timeCasaId) {
            const casaDoc = await db.collection('times').doc(jogo.timeCasaId).get();
            if (casaDoc.exists) timeCasaData = casaDoc.data();
          }
          if (jogo.timeForaId) {
            const foraDoc = await db.collection('times').doc(jogo.timeForaId).get();
            if (foraDoc.exists) timeForaData = foraDoc.data();
          }
        } catch (e) {
          console.error("Erro ao buscar times:", e);
        }

        // âœ… VERIFICAR SE USUÃRIO JÃ ESCOLHEU TIME (do documento do usuÃ¡rio)
        const torcidaEscolhida = currentUserData.torcidas?.[jogo.id];
        let nomeTimeTorcido = null;
        let corTimeTorcido = null;

        if (torcidaEscolhida) {
          // Encontrar qual time foi escolhido
          if (torcidaEscolhida === jogo.timeCasaId) {
            nomeTimeTorcido = timeCasaData.nome;
            corTimeTorcido = timeCasaData.primaria;
          } else if (torcidaEscolhida === jogo.timeForaId) {
            nomeTimeTorcido = timeForaData.nome;
            corTimeTorcido = timeForaData.primaria;
          }
        }

        // âœ… BUSCAR PONTOS DA SUBCOLEÃ‡ÃƒO PARTICIPANTES (sempre)
        let pontosCasa = 0;
        let pontosFora = 0;
        
        try {
          const partSnap = await db.collection('jogos').doc(jogo.id).collection('participantes').get();
          partSnap.forEach(doc => {
            const p = doc.data();
            const pts = p.pontos || 0;
            if (p.ladoEscolhido === 'A') {
              pontosCasa += pts;
            } else if (p.ladoEscolhido === 'B') {
              pontosFora += pts;
            }
          });
          console.log(`ğŸ“Š Jogo ${jogo.id}: Casa=${pontosCasa} pts, Fora=${pontosFora} pts`);
        } catch (e) {
          console.log('Erro ao buscar pontos:', jogo.id, e);
        }

        return {
          ...jogo,
          timeCasaData,
          timeForaData,
          torcidaEscolhida,
          nomeTimeTorcido,
          corTimeTorcido,
          pontosCasa,
          pontosFora
        };
      }));

      // Gerar HTML com layout MODERNO
      container.innerHTML = jogosProcessados.map(jogo => {
        const isLive = jogo.statusCalc === 'LIVE';
        const isScheduled = jogo.statusCalc === 'AGENDADO';
        const isFinished = jogo.statusCalc === 'ENCERRADO';
        
        const dataInicio = jogo.dataInicio?.toDate ? jogo.dataInicio.toDate() : new Date(jogo.dataInicio);

        // Contagem de torcida
        const torcidaCasa = jogo.torcidaCasaCount || 0;
        const torcidaFora = jogo.torcidaForaCount || 0;
        const totalTorcida = torcidaCasa + torcidaFora || 1;
        const percCasa = Math.round((torcidaCasa / totalTorcida) * 100);
        const percFora = 100 - percCasa;

        // Pontos dos times - jÃ¡ buscados no Promise.all acima
        const pontosCasa = jogo.pontosCasa || 0;
        const pontosFora = jogo.pontosFora || 0;
        
        const totalPontos = pontosCasa + pontosFora || 1;
        const percPontosCasa = Math.round((pontosCasa / totalPontos) * 100);
        const percPontosFora = 100 - percPontosCasa;

        // Quem estÃ¡ ganhando na torcida e nos pontos
        const casaWinning = percCasa > percFora;
        const foraWinning = percFora > percCasa;
        const casaPontosWinning = percPontosCasa > percPontosFora;
        const foraPontosWinning = percPontosFora > percPontosCasa;

        // Status badge
        let statusBadge = '';
        if (isLive) {
          statusBadge = `<span class="game-status status-live">AO VIVO</span>`;
        } else if (isScheduled) {
          statusBadge = `<span class="game-status status-scheduled">${dataInicio.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' })}</span>`;
        } else {
          statusBadge = `<span class="game-status status-finished">ENCERRADO</span>`;
        }

        // Placar ou horÃ¡rio - SEM PLACAR (plataforma de quiz)
        let scoreOrTime = '';
        if (isLive) {
          scoreOrTime = `
            <div class="game-live-indicator">
              <span class="live-pulse"></span>
              <span>AO VIVO</span>
            </div>
            <div class="game-time-info">${dataInicio.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}</div>
          `;
        } else if (isScheduled) {
          scoreOrTime = `
            <div class="game-datetime-box">
              <div class="game-date">${dataInicio.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' })}</div>
              <div class="game-hour">${dataInicio.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}</div>
            </div>
          `;
        } else {
          // ENCERRADO - mostra a data
          scoreOrTime = `
            <div class="game-datetime-box finished">
              <div class="game-date">${dataInicio.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' })}</div>
              <div class="game-hour">${dataInicio.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}</div>
            </div>
          `;
        }

        // CrÃ©ditos em disputa (total apostado/colocado pelos participantes)
        // CrÃ©ditos em disputa = creditosIniciais (admin) + poolCreditos (usuÃ¡rios)
        const creditosAdmin = jogo.creditosIniciais || 0;
        const poolCreditos = jogo.poolCreditos || jogo.poolCreditosPagos || 0;
        const creditosEmDisputa = creditosAdmin + poolCreditos;
        const creditosDisplay = creditosEmDisputa > 0 ? creditosEmDisputa : '--';

        // Badge de time escolhido
        let userCheeredBadge = '';
        if (jogo.nomeTimeTorcido) {
          userCheeredBadge = `
            <div class="user-cheered">
              <span>âœ…</span>
              <span>Torcendo: ${jogo.nomeTimeTorcido}</span>
            </div>
          `;
        }

        // BotÃ£o de aÃ§Ã£o
        let actionButton = '';
        if (jogo.torcidaEscolhida) {
          const btnClass = isLive ? 'btn-game live' : 'btn-game primary';
          const btnText = isLive ? 'ğŸ”´ Jogar Agora' : (isFinished ? 'ğŸ“Š Ver Resultado' : 'ğŸ® Entrar');
          actionButton = `<button class="${btnClass}" onclick="entrarNoJogo('${jogo.id}')">${btnText}</button>`;
        } else if (!isFinished) {
          actionButton = `<button class="btn-game secondary" onclick="abrirModalEscolha('${jogo.id}')">âš½ Escolher Time</button>`;
        } else {
          actionButton = `<button class="btn-game secondary" disabled style="opacity: 0.5;">NÃ£o participou</button>`;
        }

        // Gerar camisetas SVG
        const jerseyCasa = gerarCamisetaSVG(
          jogo.timeCasaData.primaria, 
          jogo.timeCasaData.secundaria, 
          jogo.timeCasaData.terciaria
        ).replace('viewBox="0 0 100 120"', 'viewBox="0 0 100 120" class="game-team-jersey"');

        const jerseyFora = gerarCamisetaSVG(
          jogo.timeForaData.primaria, 
          jogo.timeForaData.secundaria, 
          jogo.timeForaData.terciaria
        ).replace('viewBox="0 0 100 120"', 'viewBox="0 0 100 120" class="game-team-jersey"');

        // Classes extras do card
        const cardClasses = ['game-card'];
        if (isLive) cardClasses.push('is-live');
        if (currentUserData.timeId && (jogo.timeCasaId === currentUserData.timeId || jogo.timeForaId === currentUserData.timeId)) {
          cardClasses.push('my-team-playing');
        }

        return `
          <div class="${cardClasses.join(' ')}">
            <!-- Header com competiÃ§Ã£o e status -->
            <div class="game-card-header">
              <div class="game-league">
                <span>${jogo.competicao || 'Partida'}</span>
              </div>
              ${statusBadge}
            </div>

            <!-- Corpo: Times e Placar -->
            <div class="game-card-body">
              <div class="game-matchup">
                <!-- Time Casa -->
                <div class="game-team">
                  ${jerseyCasa}
                  <span class="game-team-name">${jogo.timeCasaData.nome}</span>
                </div>

                <!-- Info Central -->
                <div class="game-center-info">
                  ${scoreOrTime}
                </div>

                <!-- Time Fora -->
                <div class="game-team">
                  ${jerseyFora}
                  <span class="game-team-name">${jogo.timeForaData.nome}</span>
                </div>
              </div>
            </div>

            <!-- Barra de Torcida Visual -->
            <div class="torcida-section">
              <div class="torcida-label">Torcida na plataforma</div>
              <div class="torcida-visual">
                <div class="torcida-side left">
                  <span class="torcida-percent" style="color: ${jogo.timeCasaData.primaria}">${percCasa}%</span>
                </div>
                <div class="torcida-bar-container">
                  <div class="torcida-bar-fill left ${casaWinning ? 'winning' : ''}" style="width: ${percCasa}%; background: ${jogo.timeCasaData.primaria}; color: ${jogo.timeCasaData.primaria};"></div>
                  <div class="torcida-bar-fill right ${foraWinning ? 'winning' : ''}" style="width: ${percFora}%; background: ${jogo.timeForaData.primaria}; color: ${jogo.timeForaData.primaria};"></div>
                </div>
                <div class="torcida-side right">
                  <span class="torcida-percent" style="color: ${jogo.timeForaData.primaria}">${percFora}%</span>
                </div>
              </div>
            </div>

            <!-- Barra de Pontos Visual -->
            <div class="torcida-section pontos-section">
              <div class="torcida-label">â­ Pontos no quiz</div>
              <div class="torcida-visual">
                <div class="torcida-side left">
                  <span class="torcida-percent" style="color: ${jogo.timeCasaData.primaria}">${percPontosCasa}%</span>
                </div>
                <div class="torcida-bar-container">
                  <div class="torcida-bar-fill left ${casaPontosWinning ? 'winning' : ''}" style="width: ${percPontosCasa}%; background: ${jogo.timeCasaData.primaria}; color: ${jogo.timeCasaData.primaria};"></div>
                  <div class="torcida-bar-fill right ${foraPontosWinning ? 'winning' : ''}" style="width: ${percPontosFora}%; background: ${jogo.timeForaData.primaria}; color: ${jogo.timeForaData.primaria};"></div>
                </div>
                <div class="torcida-side right">
                  <span class="torcida-percent" style="color: ${jogo.timeForaData.primaria}">${percPontosFora}%</span>
                </div>
              </div>
            </div>

            <!-- CrÃ©ditos em Disputa -->
            <div class="creditos-disputa ${creditosEmDisputa >= 50 ? 'high-value' : ''}">
              <span class="creditos-icon">ğŸ’</span>
              <span class="creditos-valor">${creditosDisplay}</span>
              <span class="creditos-label">${isFinished ? 'foram disputados' : 'em disputa'}</span>
            </div>

            <!-- Badge de torcida escolhida -->
            ${userCheeredBadge}

            <!-- BotÃ£o de AÃ§Ã£o -->
            <div class="game-card-action">
              ${actionButton}
            </div>
          </div>
        `;
      }).join('');
    }

    // ===================================
    // âš½ MODAL DE ESCOLHA DE TIME
    // ===================================
    async function abrirModalEscolha(jogoId) {
      console.log("ğŸ¯ Abrindo modal para jogo:", jogoId);

      try {
        // Buscar dados do jogo
        const jogoDoc = await db.collection('jogos').doc(jogoId).get();
        if (!jogoDoc.exists) {
          showToast('âŒ Jogo nÃ£o encontrado');
          return;
        }

        const jogo = { id: jogoId, ...jogoDoc.data() };

        // Buscar dados dos times
        let timeCasaData = { nome: 'Time A', primaria: '#28a745', secundaria: '#fff', terciaria: '#28a745' };
        let timeForaData = { nome: 'Time B', primaria: '#dc3545', secundaria: '#fff', terciaria: '#dc3545' };

        if (jogo.timeCasaId) {
          const casaDoc = await db.collection('times').doc(jogo.timeCasaId).get();
          if (casaDoc.exists) timeCasaData = { id: jogo.timeCasaId, ...casaDoc.data() };
        }
        if (jogo.timeForaId) {
          const foraDoc = await db.collection('times').doc(jogo.timeForaId).get();
          if (foraDoc.exists) timeForaData = { id: jogo.timeForaId, ...foraDoc.data() };
        }

        // Salvar jogo atual para usar na confirmaÃ§Ã£o
        jogoAtual = {
          id: jogoId,
          timeCasaId: jogo.timeCasaId,
          timeForaId: jogo.timeForaId,
          timeCasaData,
          timeForaData
        };

        // Atualizar modal
        document.getElementById('teamNameModalA').textContent = timeCasaData.nome;
        document.getElementById('teamNameModalB').textContent = timeForaData.nome;

        document.getElementById('jerseyModalA').innerHTML = gerarCamisetaSVG(
          timeCasaData.primaria, timeCasaData.secundaria, timeCasaData.terciaria
        );
        document.getElementById('jerseyModalB').innerHTML = gerarCamisetaSVG(
          timeForaData.primaria, timeForaData.secundaria, timeForaData.terciaria
        );

        // Aplicar cores de borda
        document.getElementById('optionTeamA').style.borderColor = timeCasaData.primaria;
        document.getElementById('optionTeamB').style.borderColor = timeForaData.primaria;

        // Mostrar modal
        document.getElementById('modalEscolha').classList.add('active');

      } catch (error) {
        console.error("âŒ Erro ao abrir modal:", error);
        showToast('âŒ Erro ao carregar times');
      }
    }

    function fecharModal() {
      document.getElementById('modalEscolha').classList.remove('active');
      jogoAtual = null;
    }

    // ===================================
    // âœ… CONFIRMAR ESCOLHA DE TIME
    // ===================================
    async function confirmarEscolha(lado) {
      if (!jogoAtual) {
        showToast('âŒ Erro: Jogo nÃ£o selecionado');
        return;
      }

      const timeEscolhidoId = lado === 'A' ? jogoAtual.timeCasaId : jogoAtual.timeForaId;
      const timeEscolhidoNome = lado === 'A' ? jogoAtual.timeCasaData.nome : jogoAtual.timeForaData.nome;

      console.log("âœ… Confirmando escolha:");
      console.log("   Jogo:", jogoAtual.id);
      console.log("   Time ID:", timeEscolhidoId);
      console.log("   Time Nome:", timeEscolhidoNome);

      // Confirmar
      if (!confirm(`VocÃª quer torcer para ${timeEscolhidoNome}?\n\nâš ï¸ Esta escolha nÃ£o pode ser alterada!`)) {
        return;
      }

      try {
        showToast('ğŸ’¾ Salvando...');

        // 1. Atualizar documento do usuÃ¡rio com o timeId real
        await db.collection('usuarios').doc(currentUserId).update({
          [`torcidas.${jogoAtual.id}`]: timeEscolhidoId
        });

        // 2. Atualizar contador do jogo
        const campoContador = lado === 'A' ? 'torcidaCasaCount' : 'torcidaForaCount';
        await db.collection('jogos').doc(jogoAtual.id).update({
          [campoContador]: firebase.firestore.FieldValue.increment(1)
        });

        // 3. Atualizar dados locais
        if (!currentUserData.torcidas) currentUserData.torcidas = {};
        currentUserData.torcidas[jogoAtual.id] = timeEscolhidoId;

        console.log("âœ… Escolha salva com sucesso!");
        showToast(`âœ… VocÃª estÃ¡ torcendo para ${timeEscolhidoNome}!`);

        // Fechar modal
        fecharModal();

        // Recarregar jogos
        await carregarJogos();

        // Redirecionar para o jogo apÃ³s 1 segundo
        setTimeout(() => {
          entrarNoJogo(jogoAtual.id);
        }, 1000);

      } catch (error) {
        console.error("âŒ Erro ao salvar:", error);
        showToast('âŒ Erro ao salvar escolha. Tente novamente!');
      }
    }

    // ===================================
    // ğŸ® ENTRAR NO JOGO
    // ===================================
    function entrarNoJogo(jogoId) {
      window.location.href = `painel-jogo.html?jogoId=${jogoId}`;
    }

    // ===================================
    // ğŸšª LOGOUT
    // ===================================
    function logout() {
      if (confirm('Deseja realmente sair?')) {
        auth.signOut().then(() => {
          window.location.href = 'index.html';
        });
      }
    }

    // ===================================
    // âš½ QUIZ DIÃRIO DO TIME DO CORAÃ‡ÃƒO
    // ===================================
    let quizDiarioPerguntaAtual = null;

    /**
     * Verifica se deve mostrar o quiz diÃ¡rio
     * Regras:
     *  1. UsuÃ¡rio precisa ter um timeId (time do coraÃ§Ã£o)
     *  2. NÃ£o pode ter respondido hoje (verificado via Firestore)
     *  3. NÃ£o pode jÃ¡ ter sido exibido nesta sessÃ£o (sessionStorage)
     */
    async function verificarQuizDiario() {
      try {
        // JÃ¡ exibiu nesta sessÃ£o? NÃ£o mostra de novo (reload/navegaÃ§Ã£o)
        if (sessionStorage.getItem('yellup_quiz_diario_exibido')) {
          console.log("ğŸ“‹ Quiz diÃ¡rio: jÃ¡ exibido nesta sessÃ£o, pulando.");
          return;
        }

        // Tem time do coraÃ§Ã£o?
        if (!currentUserData.timeId) {
          console.log("ğŸ“‹ Quiz diÃ¡rio: usuÃ¡rio nÃ£o tem time do coraÃ§Ã£o.");
          return;
        }

        // JÃ¡ respondeu hoje?
        const hoje = new Date().toISOString().split('T')[0]; // "YYYY-MM-DD"
        const ultimoQuiz = currentUserData.ultimoQuizDiario || '';

        if (ultimoQuiz === hoje) {
          console.log("ğŸ“‹ Quiz diÃ¡rio: jÃ¡ respondeu hoje (" + hoje + ").");
          // Marca sessÃ£o para nÃ£o checar de novo
          sessionStorage.setItem('yellup_quiz_diario_exibido', 'true');
          return;
        }

        // Buscar dados do time para exibir no modal
        const timeDoc = await db.collection('times').doc(currentUserData.timeId).get();
        if (!timeDoc.exists) {
          console.log("ğŸ“‹ Quiz diÃ¡rio: time nÃ£o encontrado no banco.");
          return;
        }

        const timeData = timeDoc.data();

        // Preencher info do time no modal
        document.getElementById('quizTeamName').textContent = timeData.nome || 'Seu Time';
        document.getElementById('quizTeamJersey').innerHTML = gerarCamisetaSVG(
          timeData.primaria, timeData.secundaria, timeData.terciaria
        );

        // Marcar sessÃ£o como exibido (mesmo que o user feche sem responder)
        sessionStorage.setItem('yellup_quiz_diario_exibido', 'true');

        // Pequeno delay para o painel carregar e nÃ£o competir visualmente
        setTimeout(() => {
          document.getElementById('quizDiarioOverlay').classList.add('active');
        }, 1200);

        console.log("âœ… Quiz diÃ¡rio: mostrando convite para " + timeData.nome);

      } catch (error) {
        console.error("âŒ Erro no quiz diÃ¡rio:", error);
      }
    }

    /**
     * UsuÃ¡rio aceitou: busca pergunta aleatÃ³ria e exibe
     */
    async function iniciarQuizDiario() {
      try {
        // Esconder convite, mostrar loading no botÃ£o
        const btnSim = document.querySelector('.btn-quiz-sim');
        btnSim.textContent = 'â³ Buscando...';
        btnSim.disabled = true;

        // Buscar perguntas do time do coraÃ§Ã£o
        const perguntasSnap = await db.collection('perguntas')
          .where('timeId', '==', currentUserData.timeId)
          .get();

        if (perguntasSnap.empty) {
          showToast('ğŸ˜” Ainda nÃ£o temos perguntas sobre seu time. Em breve!');
          fecharQuizDiario();
          return;
        }

        // Escolher uma pergunta aleatÃ³ria
        // Tentar evitar repetir a Ãºltima pergunta respondida
        const todasPerguntas = perguntasSnap.docs;
        const ultimaPerguntaId = currentUserData.ultimaQuizDiarioPerguntaId || '';
        
        let perguntasFiltradas = todasPerguntas.filter(doc => doc.id !== ultimaPerguntaId);
        if (perguntasFiltradas.length === 0) perguntasFiltradas = todasPerguntas;

        const randomIndex = Math.floor(Math.random() * perguntasFiltradas.length);
        const perguntaDoc = perguntasFiltradas[randomIndex];
        
        quizDiarioPerguntaAtual = {
          id: perguntaDoc.id,
          ...perguntaDoc.data()
        };

        // Preencher a pergunta
        const pontuacao = quizDiarioPerguntaAtual.pontuacao || 5;
        document.getElementById('quizXpBadge').textContent = `â­ Acertou = +${pontuacao} XP | Participou = +2 XP`;
        document.getElementById('quizPerguntaTexto').textContent = quizDiarioPerguntaAtual.pergunta;

        // Gerar alternativas
        const alternativas = quizDiarioPerguntaAtual.alternativas;
        const container = document.getElementById('quizAlternativas');
        container.innerHTML = '';

        ['A', 'B', 'C', 'D'].forEach(letra => {
          if (alternativas[letra]) {
            const btn = document.createElement('button');
            btn.className = 'quiz-alt-btn';
            btn.innerHTML = `
              <span class="alt-letra">${letra}</span>
              <span>${alternativas[letra]}</span>
            `;
            btn.onclick = () => responderQuizDiario(letra, btn);
            container.appendChild(btn);
          }
        });

        // TransiÃ§Ã£o: convite â†’ pergunta
        document.getElementById('quizStepConvite').style.display = 'none';
        document.getElementById('quizStepPergunta').style.display = 'block';

      } catch (error) {
        console.error("âŒ Erro ao buscar pergunta:", error);
        showToast('âŒ Erro ao carregar pergunta. Tente novamente!');
        fecharQuizDiario();
      }
    }

    /**
     * UsuÃ¡rio respondeu a pergunta
     */
    async function responderQuizDiario(letraEscolhida, btnClicado) {
      if (!quizDiarioPerguntaAtual) return;

      // Desabilitar todos os botÃµes
      const todosBtn = document.querySelectorAll('.quiz-alt-btn');
      todosBtn.forEach(btn => {
        btn.classList.add('disabled');
        btn.onclick = null;
      });

      const correta = quizDiarioPerguntaAtual.correta;
      const acertou = letraEscolhida === correta;
      const pontuacaoBase = quizDiarioPerguntaAtual.pontuacao || 5;
      const xpGanho = acertou ? pontuacaoBase : 2;

      // Marcar visualmente
      if (acertou) {
        btnClicado.classList.add('correta');
      } else {
        btnClicado.classList.add('errada');
        // Mostrar qual era a correta
        todosBtn.forEach(btn => {
          if (btn.querySelector('.alt-letra').textContent === correta) {
            btn.classList.add('correta');
            btn.classList.remove('disabled');
          }
        });
      }

      // Salvar no Firestore
      const hoje = new Date().toISOString().split('T')[0];
      try {
        await db.collection('usuarios').doc(currentUserId).update({
          ultimoQuizDiario: hoje,
          ultimaQuizDiarioPerguntaId: quizDiarioPerguntaAtual.id,
          xp: firebase.firestore.FieldValue.increment(xpGanho),
          quizDiarioTotal: firebase.firestore.FieldValue.increment(1),
          quizDiarioAcertos: acertou
            ? firebase.firestore.FieldValue.increment(1)
            : firebase.firestore.FieldValue.increment(0)
        });

        // Atualizar dados locais
        currentUserData.ultimoQuizDiario = hoje;
        currentUserData.ultimaQuizDiarioPerguntaId = quizDiarioPerguntaAtual.id;
        currentUserData.xp = (currentUserData.xp || 0) + xpGanho;

        console.log(`âœ… Quiz diÃ¡rio: ${acertou ? 'ACERTOU' : 'ERROU'} â†’ +${xpGanho} XP`);
      } catch (error) {
        console.error("âŒ Erro ao salvar quiz diÃ¡rio:", error);
      }

      // ApÃ³s 1.5s, mostrar resultado
      setTimeout(() => {
        mostrarResultadoQuiz(acertou, xpGanho);
      }, 1500);
    }

    /**
     * Exibe o step de resultado final
     */
    function mostrarResultadoQuiz(acertou, xpGanho) {
      document.getElementById('quizStepPergunta').style.display = 'none';
      document.getElementById('quizStepResultado').style.display = 'block';

      if (acertou) {
        document.getElementById('quizResultIcon').textContent = 'ğŸ‰';
        document.getElementById('quizResultTitulo').textContent = 'Mandou bem!';
        document.getElementById('quizResultTitulo').className = 'quiz-resultado-titulo acertou';
        document.getElementById('quizResultMsg').textContent = 
          'VocÃª conhece bem seu time do coraÃ§Ã£o! Volte amanhÃ£ para mais uma pergunta.';
      } else {
        document.getElementById('quizResultIcon').textContent = 'ğŸ’ª';
        document.getElementById('quizResultTitulo').textContent = 'Quase lÃ¡!';
        document.getElementById('quizResultTitulo').className = 'quiz-resultado-titulo errou';
        document.getElementById('quizResultMsg').textContent = 
          'Continue tentando! Aproveite nossa plataforma para aprender mais sobre futebol. Volte amanhÃ£!';
      }

      document.getElementById('quizXpGanho').textContent = `â­ +${xpGanho} XP`;

      // Atualizar XP exibido no perfil sem recarregar
      document.getElementById('statXP').textContent = currentUserData.xp || 0;

      // Atualizar nÃ­vel se mudou
      const nivel = calcularNivel(currentUserData.xp);
      const proximoNivel = calcularProximoNivel(currentUserData.xp);
      const progresso = calcularProgressoNivel(currentUserData.xp);

      const nivelBadge = document.getElementById('profileLevel');
      if (nivelBadge) {
        nivelBadge.innerHTML = `
          <span class="level-badge" style="background: ${nivel.cor}20; color: ${nivel.cor}; border: 1px solid ${nivel.cor}50;">
            ${nivel.emoji} ${nivel.nome}
          </span>
        `;
      }

      const progressBar = document.getElementById('levelProgress');
      if (progressBar && proximoNivel) {
        progressBar.innerHTML = `
          <div style="font-size: 0.8em; color: #a9b5c6; margin-bottom: 5px;">
            ${currentUserData.xp} / ${proximoNivel.minXP} XP para ${proximoNivel.emoji} ${proximoNivel.nome}
          </div>
          <div style="height: 6px; background: rgba(0,0,0,0.3); border-radius: 3px; overflow: hidden;">
            <div style="width: ${progresso}%; height: 100%; background: linear-gradient(90deg, ${nivel.cor}, ${proximoNivel.cor}); border-radius: 3px;"></div>
          </div>
        `;
      }
    }

    /**
     * Fechar modal e resetar steps
     */
    function fecharQuizDiario() {
      document.getElementById('quizDiarioOverlay').classList.remove('active');

      // Resetar para o estado inicial (caso abra amanhÃ£)
      setTimeout(() => {
        document.getElementById('quizStepConvite').style.display = 'block';
        document.getElementById('quizStepPergunta').style.display = 'none';
        document.getElementById('quizStepResultado').style.display = 'none';

        // Resetar botÃ£o
        const btnSim = document.querySelector('.btn-quiz-sim');
        if (btnSim) {
          btnSim.textContent = 'ğŸ® Bora!';
          btnSim.disabled = false;
        }

        quizDiarioPerguntaAtual = null;
      }, 400);
    }

    // Fechar quiz diÃ¡rio ao clicar no overlay (fora do card)
    document.getElementById('quizDiarioOverlay').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharQuizDiario();
      }
    });

    // ===================================
    // FIM QUIZ DIÃRIO
    // ===================================

    // ===================================
    // CARROSSEL DE DICAS
    // ===================================
    let currentSlide = 0;
    let slideInterval;
    const totalSlides = 5;
    const slideDelay = 5000; // 5 segundos por slide

    function goToSlide(index) {
      const slides = document.querySelectorAll('.tips-slide');
      const dots = document.querySelectorAll('.tips-dot');
      
      slides.forEach(s => s.classList.remove('active'));
      dots.forEach(d => d.classList.remove('active'));
      
      currentSlide = index;
      slides[currentSlide].classList.add('active');
      dots[currentSlide].classList.add('active');
      
      // Reiniciar intervalo
      clearInterval(slideInterval);
      startCarousel();
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      goToSlide(currentSlide);
    }

    function startCarousel() {
      slideInterval = setInterval(nextSlide, slideDelay);
    }

    // Touch/swipe support para mobile
    let touchStartX = 0;
    let touchEndX = 0;

    document.getElementById('tipsCarousel')?.addEventListener('touchstart', e => {
      touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    document.getElementById('tipsCarousel')?.addEventListener('touchend', e => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    }, { passive: true });

    function handleSwipe() {
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > 50) { // MÃ­nimo de 50px para considerar swipe
        if (diff > 0) {
          // Swipe left - prÃ³ximo slide
          nextSlide();
        } else {
          // Swipe right - slide anterior
          currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
          goToSlide(currentSlide);
        }
      }
    }

    // Iniciar carrossel
    startCarousel();

    // ===================================
    // ATIVIDADE RECENTE DOS AMIGOS
    // ===================================
    
    /**
     * Carrega atividade recente dos amigos do usuÃ¡rio
    /**
     * Verifica se deve mostrar aÃ§Ã£o rÃ¡pida (ex: time jogando)
     */
    function verificarAcaoRapida() {
      if (!currentUserData || !currentUserData.timeId) return;
      
      const quickBar = document.getElementById('quickActionBar');
      const gamesLive = document.getElementById('gamesLive');
      
      if (!quickBar || !gamesLive) return;
      
      // Verificar se tem jogo ao vivo do time do usuÃ¡rio
      const temJogoDoTime = gamesLive.querySelector('.game-card.my-team-playing');
      
      // Se nÃ£o tem jogo ao vivo, verificar quiz diÃ¡rio pendente
      const hoje = new Date().toISOString().split('T')[0];
      const jaFezQuizHoje = currentUserData.ultimoQuizDiario === hoje;
      
      if (temJogoDoTime) {
        quickBar.style.display = 'flex';
        document.getElementById('quickActionIcon').textContent = 'âš½';
        document.getElementById('quickActionTitle').textContent = 'Seu time estÃ¡ jogando!';
        document.getElementById('quickActionDesc').textContent = 'Entre na partida e ganhe XP';
        document.getElementById('quickActionBtn').textContent = 'ğŸ® Jogar';
        document.getElementById('quickActionBtn').onclick = () => {
          const gameCard = gamesLive.querySelector('.game-card.my-team-playing');
          if (gameCard) gameCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        };
      } else if (!jaFezQuizHoje) {
        quickBar.style.display = 'flex';
        document.getElementById('quickActionIcon').textContent = 'ğŸ§ ';
        document.getElementById('quickActionTitle').textContent = 'Quiz diÃ¡rio disponÃ­vel!';
        document.getElementById('quickActionDesc').textContent = 'Teste seu conhecimento e ganhe XP';
        document.getElementById('quickActionBtn').textContent = 'ğŸ¯ Fazer Quiz';
        document.getElementById('quickActionBtn').onclick = () => {
          verificarQuizDiario();
        };
      } else {
        // NÃ£o mostrar a barra se nÃ£o tem aÃ§Ã£o urgente
        quickBar.style.display = 'none';
      }
    }

    function executarAcaoRapida() {
      // Esta funÃ§Ã£o Ã© chamada pelo botÃ£o da barra de aÃ§Ã£o rÃ¡pida
      // A lÃ³gica especÃ­fica Ã© definida em verificarAcaoRapida()
    }

    // Chamar funÃ§Ãµes de gamificaÃ§Ã£o apÃ³s carregar dados do usuÃ¡rio
    const originalCarregarDadosUsuario = typeof carregarDadosUsuario !== 'undefined' ? carregarDadosUsuario : null;
    
    if (originalCarregarDadosUsuario) {
      carregarDadosUsuario = async function(userId) {
        await originalCarregarDadosUsuario(userId);
        
        // Atualizar elementos de gamificaÃ§Ã£o
        setTimeout(() => {
          verificarAcaoRapida();
        }, 500);
      };
    }

    // ===================================
    // FIM GAMIFICAÃ‡ÃƒO VISÃVEL

    // ===================================
    // AUTO-REFRESH DOS JOGOS
    // ===================================
    let autoRefreshInterval = null;
    const AUTO_REFRESH_SECONDS = 30; // Atualiza a cada 30 segundos

    function iniciarAutoRefresh() {
      // Limpar intervalo anterior se existir
      if (autoRefreshInterval) {
        clearInterval(autoRefreshInterval);
      }

      // Criar indicador de Ãºltima atualizaÃ§Ã£o
      const indicator = document.createElement('div');
      indicator.id = 'refreshIndicator';
      indicator.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(14, 20, 27, 0.9);
        border: 1px solid rgba(255, 159, 67, 0.3);
        border-radius: 12px;
        padding: 8px 14px;
        font-size: 0.7em;
        color: var(--text-secondary);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      `;
      indicator.innerHTML = `
        <span id="refreshIcon" style="font-size: 1.2em;">ğŸ”„</span>
        <span id="refreshText">Atualizado agora</span>
      `;
      indicator.onclick = () => atualizarDadosManual();
      document.body.appendChild(indicator);

      // Iniciar intervalo
      autoRefreshInterval = setInterval(async () => {
        await atualizarDadosSilencioso();
      }, AUTO_REFRESH_SECONDS * 1000);

      console.log(`ğŸ”„ Auto-refresh iniciado (${AUTO_REFRESH_SECONDS}s)`);
    }

    async function atualizarDadosSilencioso() {
      try {
        const icon = document.getElementById('refreshIcon');
        const text = document.getElementById('refreshText');
        
        if (icon) icon.style.animation = 'spin 1s linear infinite';
        if (text) text.textContent = 'Atualizando...';

        await carregarJogos();

        if (icon) icon.style.animation = '';
        if (text) text.textContent = 'Atualizado agora';

        // Fade do indicador apÃ³s alguns segundos
        setTimeout(() => {
          if (text) text.textContent = `Atualizado hÃ¡ ${AUTO_REFRESH_SECONDS}s`;
        }, AUTO_REFRESH_SECONDS * 500);

      } catch (error) {
        console.error('Erro no auto-refresh:', error);
        const text = document.getElementById('refreshText');
        if (text) text.textContent = 'Erro ao atualizar';
      }
    }

    async function atualizarDadosManual() {
      const indicator = document.getElementById('refreshIndicator');
      if (indicator) {
        indicator.style.transform = 'scale(0.95)';
        setTimeout(() => indicator.style.transform = '', 200);
      }
      await atualizarDadosSilencioso();
      showToast('ğŸ”„ Dados atualizados!');
    }

    // Adicionar CSS para animaÃ§Ã£o de spin
    const styleRefresh = document.createElement('style');
    styleRefresh.textContent = `
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      #refreshIndicator:hover {
        background: rgba(255, 159, 67, 0.15);
        border-color: rgba(255, 159, 67, 0.5);
      }
    `;
    document.head.appendChild(styleRefresh);

    // Iniciar auto-refresh quando pÃ¡gina carregar
    window.addEventListener('load', () => {
      setTimeout(iniciarAutoRefresh, 2000);
    });

    // Pausar quando aba nÃ£o estÃ¡ visÃ­vel para economizar recursos
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        if (autoRefreshInterval) {
          clearInterval(autoRefreshInterval);
          autoRefreshInterval = null;
          console.log('â¸ï¸ Auto-refresh pausado (aba oculta)');
        }
      } else {
        // Atualizar imediatamente ao voltar e reiniciar intervalo
        atualizarDadosSilencioso();
        iniciarAutoRefresh();
        console.log('â–¶ï¸ Auto-refresh retomado');
      }
    });

    // ===================================
    // SLIDESHOW DE FOTOS DO PERFIL
    // ===================================
    let bgSlideshowInterval = null;
    let currentBgSlide = 0;
    let bgPhotos = [];

    /**
     * Carrega fotos de fundo do perfil do usuÃ¡rio
     * As fotos sÃ£o salvas em: usuarios/{uid}/fotosFundo (array de URLs)
     */
    async function carregarFotosFundoPerfil() {
      if (!currentUserData) return;

      // Buscar fotos de fundo do usuÃ¡rio
      const fotos = currentUserData.fotosFundo || [];
      
      if (fotos.length === 0) {
        console.log('ğŸ“· UsuÃ¡rio nÃ£o tem fotos de fundo personalizadas');
        return;
      }

      bgPhotos = fotos.slice(0, 3); // MÃ¡ximo 3 fotos
      const profileCard = document.getElementById('userProfileCard');
      
      if (profileCard) {
        profileCard.classList.add('has-bg-photos');
      }

      // Aplicar fotos aos slides
      bgPhotos.forEach((url, index) => {
        const slide = document.getElementById(`bgSlide${index + 1}`);
        if (slide) {
          slide.style.backgroundImage = `url('${url}')`;
        }
      });

      // Adicionar indicadores se tiver mais de 1 foto
      if (bgPhotos.length > 1) {
        const indicators = document.createElement('div');
        indicators.className = 'profile-bg-indicators';
        indicators.innerHTML = bgPhotos.map((_, i) => 
          `<div class="dot ${i === 0 ? 'active' : ''}" data-index="${i}"></div>`
        ).join('');
        
        const profileCard = document.getElementById('userProfileCard');
        if (profileCard) {
          profileCard.appendChild(indicators);
        }

        // Iniciar slideshow
        iniciarSlideshowPerfil();
      }

      console.log(`ğŸ“· Carregadas ${bgPhotos.length} fotos de fundo do perfil`);
    }

    function iniciarSlideshowPerfil() {
      if (bgPhotos.length <= 1) return;

      // Limpar intervalo anterior
      if (bgSlideshowInterval) {
        clearInterval(bgSlideshowInterval);
      }

      // Trocar slide a cada 5 segundos
      bgSlideshowInterval = setInterval(() => {
        // Remover active do slide atual
        const slideAtual = document.getElementById(`bgSlide${currentBgSlide + 1}`);
        if (slideAtual) slideAtual.classList.remove('active');

        // AvanÃ§ar para prÃ³ximo slide
        currentBgSlide = (currentBgSlide + 1) % bgPhotos.length;

        // Ativar novo slide
        const novoSlide = document.getElementById(`bgSlide${currentBgSlide + 1}`);
        if (novoSlide) novoSlide.classList.add('active');

        // Atualizar indicadores
        const dots = document.querySelectorAll('.profile-bg-indicators .dot');
        dots.forEach((dot, i) => {
          dot.classList.toggle('active', i === currentBgSlide);
        });

      }, 5000); // 5 segundos por foto
    }

    // Chamar apÃ³s carregar dados do usuÃ¡rio
    // Adicionar ao fluxo existente
    const originalCarregarPerfil = carregarDadosUsuario;
    if (originalCarregarPerfil) {
      carregarDadosUsuario = async function(userId) {
        await originalCarregarPerfil(userId);
        // Carregar fotos de fundo apÃ³s dados do usuÃ¡rio
        setTimeout(carregarFotosFundoPerfil, 300);
      };
    }
    // ===================================

    // Fechar modal ao clicar fora
    document.getElementById('modalEscolha').addEventListener('click', function(e) {
      if (e.target === this) {
        fecharModal();
      }
    });

    console.log("âœ… Yellup Painel v8.0 - GamificaÃ§Ã£o VisÃ­vel + Melhorias UX!");
  </script>

</body>
</html>
