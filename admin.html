
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Admin Editável</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getFirestore, collection, getDocs, deleteDoc, doc, updateDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyC5ZrkEy7KuCFJOtPvI7-P-JcA0MF4im5c",
    authDomain: "painel-yellup.firebaseapp.com",
    projectId: "painel-yellup",
    storageBucket: "painel-yellup.appspot.com",
    messagingSenderId: "608347210297",
    appId: "1:608347210297:web:75092713724e617c7203e8",
    measurementId: "G-SYZ16X31KQ"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function carregarDados(col, listaId) {
    const snap = await getDocs(collection(db, col));
    const lista = document.getElementById(listaId);
    lista.innerHTML = "";
    snap.forEach(docu => {
        const data = docu.data();
        const item = document.createElement('li');
        const content = document.createElement('span');
        content.textContent = JSON.stringify(data);
        const delBtn = document.createElement('button');
        delBtn.textContent = 'Excluir';
        delBtn.onclick = async () => {
            await deleteDoc(doc(db, col, docu.id));
            alert(col + ' removido!');
            location.reload();
        };
        const editBtn = document.createElement('button');
        editBtn.textContent = 'Editar';
        editBtn.onclick = async () => {
            const novoJson = prompt('Edite os dados (formato JSON):', JSON.stringify(data));
            if (novoJson) {
                try {
                    const novoData = JSON.parse(novoJson);
                    await updateDoc(doc(db, col, docu.id), novoData);
                    alert('Atualizado com sucesso!');
                    location.reload();
                } catch (e) {
                    alert('Erro no JSON! Certifique-se de usar um formato válido.');
                }
            }
        };
        item.appendChild(content);
        item.appendChild(editBtn);
        item.appendChild(delBtn);
        lista.appendChild(item);
    });
}
window.onload = () => {
    carregarDados('jogos', 'jogosLista');
    carregarDados('perguntas', 'perguntasLista');
    carregarDados('premios', 'premiosLista');
};
</script>
<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; text-align: center; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
h2 { color: #004080; }
ul { list-style: none; padding: 0; }
li { background: #e6f0ff; margin: 8px 0; padding: 10px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
button { padding: 5px 10px; margin-left: 5px; background: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
button:hover { background: #0056b3; }
button:nth-child(3) { background: #dc3545; }
button:nth-child(3):hover { background: #b02a37; }
span { flex: 1; text-align: left; word-break: break-word; font-size: 12px; }
a { display: inline-block; margin-top: 20px; text-decoration: none; color: #007bff; }
</style>
</head>
<body>
<div class="container">
<h1>Painel Admin Editável</h1>

<h2>Jogos</h2>
<ul id="jogosLista"><li>Carregando jogos...</li></ul>

<h2>Perguntas</h2>
<ul id="perguntasLista"><li>Carregando perguntas...</li></ul>

<h2>Premiações</h2>
<ul id="premiosLista"><li>Carregando prêmios...</li></ul>

<a href="index.html">Voltar ao Início</a>
</div>
</body>
</html>
